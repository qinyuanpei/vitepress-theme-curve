<!DOCTYPE html>
<html lang="zh-cn"><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    
    
    <title>支持外部链接跳转的 Vue Router 扩展实现 - 元视角</title>
    <meta name="description" content="Vue Router 是 Vue 中重要的插件，特别在单页面应用中起着关键作用。随着页面概念逐渐消失，路由根据URL确定显示内容。文章介绍了处理内部和外部链接的问题，提出了在 Vue Router 基础上实现外部链接跳转的扩展思路。通过自定义组件 MyRouterLink，区分内部和外部链接并支持传递URL参数，解决了 Vue Router 不支持外部链接的问题。讨论了如何给出站链接携带令牌信息，通过指令或组件内部处理统一附加参数。最终强调了在项目中统一使用规范化组件的重要性。">
    
    
    <link rel="shortcut icon" href="" type="image/x-icon">

    
    <link rel="icon" type="image/x-icon" href="/images/favicon.ico">

    
    <link rel="icon" type="image/png" href="/images/favicon.png">
    
    
    <meta property="og:title" content="支持外部链接跳转的 Vue Router 扩展实现">
    <meta property="og:description" content="Vue Router 是 Vue 中重要的插件，特别在单页面应用中起着关键作用。随着页面概念逐渐消失，路由根据URL确定显示内容。文章介绍了处理内部和外部链接的问题，提出了在 Vue Router 基础上实现外部链接跳转的扩展思路。通过自定义组件 MyRouterLink，区分内部和外部链接并支持传递URL参数，解决了 Vue Router 不支持外部链接的问题。讨论了如何给出站链接携带令牌信息，通过指令或组件内部处理统一附加参数。最终强调了在项目中统一使用规范化组件的重要性。">
    <meta property="og:type" content="article">
    <meta property="og:url" content="http://localhost:1313/posts/implementation-of-vue-router-extension-that-supports-external-link/">
    
    
    
    
    <link rel="stylesheet" href="/scss/main.min.a26fc3f44f4470d33dd9b6a47b01a53d8659f816ca174af79c93ccf265ea9f9f.css">
    
    
    
    

    
    <link rel="stylesheet" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/misans@4.1.0/lib/Normal/MiSans-Medium.min.css" /> 
    <link rel="stylesheet" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/misans@4.1.0/lib/Normal/MiSans-Bold.min.css" />
    
    
    <link rel="stylesheet" href="/css/iconfont.css">
    <link rel="stylesheet" crossorigin="anonymous" href="//at.alicdn.com/t/c/font_4878646_5ey4i2u9xnm.css" />
    

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/go.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css" media="(prefers-color-scheme: dark)">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css" media="(prefers-color-scheme: light)">
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0/dist/fancybox/fancybox.css" />
    <script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0/dist/fancybox/fancybox.umd.js"></script>
</head> <body><div class="background patterns">
    
    <div class="bg-mask"></div>
    
    
    <div class="bg-image" style="background-image: url('https://tuapi.eees.cc/api.php?category=%7bdongman,fengjing%7d&amp;type=302')"></div>
    
    
    
</div> 

<style>
    .background {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: -2;
      &.patterns {
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='192' height='192' viewBox='0 0 192 192'%3E%3Cpath fill='%23494849' fill-opacity='0.08' d='M192 15v2a11 11 0 0 0-11 11c0 1.94 1.16 4.75 2.53 6.11l2.36 2.36a6.93 6.93 0 0 1 1.22 7.56l-.43.84a8.08 8.08 0 0 1-6.66 4.13H145v35.02a6.1 6.1 0 0 0 3.03 4.87l.84.43c1.58.79 4 .4 5.24-.85l2.36-2.36a12.04 12.04 0 0 1 7.51-3.11 13 13 0 1 1 .02 26 12 12 0 0 1-7.53-3.11l-2.36-2.36a4.93 4.93 0 0 0-5.24-.85l-.84.43a6.1 6.1 0 0 0-3.03 4.87V143h35.02a8.08 8.08 0 0 1 6.66 4.13l.43.84a6.91 6.91 0 0 1-1.22 7.56l-2.36 2.36A10.06 10.06 0 0 0 181 164a11 11 0 0 0 11 11v2a13 13 0 0 1-13-13 12 12 0 0 1 3.11-7.53l2.36-2.36a4.93 4.93 0 0 0 .85-5.24l-.43-.84a6.1 6.1 0 0 0-4.87-3.03H145v35.02a8.08 8.08 0 0 1-4.13 6.66l-.84.43a6.91 6.91 0 0 1-7.56-1.22l-2.36-2.36A10.06 10.06 0 0 0 124 181a11 11 0 0 0-11 11h-2a13 13 0 0 1 13-13c2.47 0 5.79 1.37 7.53 3.11l2.36 2.36a4.94 4.94 0 0 0 5.24.85l.84-.43a6.1 6.1 0 0 0 3.03-4.87V145h-35.02a8.08 8.08 0 0 1-6.66-4.13l-.43-.84a6.91 6.91 0 0 1 1.22-7.56l2.36-2.36A10.06 10.06 0 0 0 107 124a11 11 0 0 0-22 0c0 1.94 1.16 4.75 2.53 6.11l2.36 2.36a6.93 6.93 0 0 1 1.22 7.56l-.43.84a8.08 8.08 0 0 1-6.66 4.13H49v35.02a6.1 6.1 0 0 0 3.03 4.87l.84.43c1.58.79 4 .4 5.24-.85l2.36-2.36a12.04 12.04 0 0 1 7.51-3.11A13 13 0 0 1 81 192h-2a11 11 0 0 0-11-11c-1.94 0-4.75 1.16-6.11 2.53l-2.36 2.36a6.93 6.93 0 0 1-7.56 1.22l-.84-.43a8.08 8.08 0 0 1-4.13-6.66V145H11.98a6.1 6.1 0 0 0-4.87 3.03l-.43.84c-.79 1.58-.4 4 .85 5.24l2.36 2.36a12.04 12.04 0 0 1 3.11 7.51A13 13 0 0 1 0 177v-2a11 11 0 0 0 11-11c0-1.94-1.16-4.75-2.53-6.11l-2.36-2.36a6.93 6.93 0 0 1-1.22-7.56l.43-.84a8.08 8.08 0 0 1 6.66-4.13H47v-35.02a6.1 6.1 0 0 0-3.03-4.87l-.84-.43c-1.59-.8-4-.4-5.24.85l-2.36 2.36A12 12 0 0 1 28 109a13 13 0 1 1 0-26c2.47 0 5.79 1.37 7.53 3.11l2.36 2.36a4.94 4.94 0 0 0 5.24.85l.84-.43A6.1 6.1 0 0 0 47 84.02V49H11.98a8.08 8.08 0 0 1-6.66-4.13l-.43-.84a6.91 6.91 0 0 1 1.22-7.56l2.36-2.36A10.06 10.06 0 0 0 11 28 11 11 0 0 0 0 17v-2a13 13 0 0 1 13 13c0 2.47-1.37 5.79-3.11 7.53l-2.36 2.36a4.94 4.94 0 0 0-.85 5.24l.43.84A6.1 6.1 0 0 0 11.98 47H47V11.98a8.08 8.08 0 0 1 4.13-6.66l.84-.43a6.91 6.91 0 0 1 7.56 1.22l2.36 2.36A10.06 10.06 0 0 0 68 11 11 11 0 0 0 79 0h2a13 13 0 0 1-13 13 12 12 0 0 1-7.53-3.11l-2.36-2.36a4.93 4.93 0 0 0-5.24-.85l-.84.43A6.1 6.1 0 0 0 49 11.98V47h35.02a8.08 8.08 0 0 1 6.66 4.13l.43.84a6.91 6.91 0 0 1-1.22 7.56l-2.36 2.36A10.06 10.06 0 0 0 85 68a11 11 0 0 0 22 0c0-1.94-1.16-4.75-2.53-6.11l-2.36-2.36a6.93 6.93 0 0 1-1.22-7.56l.43-.84a8.08 8.08 0 0 1 6.66-4.13H143V11.98a6.1 6.1 0 0 0-3.03-4.87l-.84-.43c-1.59-.8-4-.4-5.24.85l-2.36 2.36A12 12 0 0 1 124 13a13 13 0 0 1-13-13h2a11 11 0 0 0 11 11c1.94 0 4.75-1.16 6.11-2.53l2.36-2.36a6.93 6.93 0 0 1 7.56-1.22l.84.43a8.08 8.08 0 0 1 4.13 6.66V47h35.02a6.1 6.1 0 0 0 4.87-3.03l.43-.84c.8-1.59.4-4-.85-5.24l-2.36-2.36A12 12 0 0 1 179 28a13 13 0 0 1 13-13zM84.02 143a6.1 6.1 0 0 0 4.87-3.03l.43-.84c.8-1.59.4-4-.85-5.24l-2.36-2.36A12 12 0 0 1 83 124a13 13 0 1 1 26 0c0 2.47-1.37 5.79-3.11 7.53l-2.36 2.36a4.94 4.94 0 0 0-.85 5.24l.43.84a6.1 6.1 0 0 0 4.87 3.03H143v-35.02a8.08 8.08 0 0 1 4.13-6.66l.84-.43a6.91 6.91 0 0 1 7.56 1.22l2.36 2.36A10.06 10.06 0 0 0 164 107a11 11 0 0 0 0-22c-1.94 0-4.75 1.16-6.11 2.53l-2.36 2.36a6.93 6.93 0 0 1-7.56 1.22l-.84-.43a8.08 8.08 0 0 1-4.13-6.66V49h-35.02a6.1 6.1 0 0 0-4.87 3.03l-.43.84c-.79 1.58-.4 4 .85 5.24l2.36 2.36a12.04 12.04 0 0 1 3.11 7.51A13 13 0 1 1 83 68a12 12 0 0 1 3.11-7.53l2.36-2.36a4.93 4.93 0 0 0 .85-5.24l-.43-.84A6.1 6.1 0 0 0 84.02 49H49v35.02a8.08 8.08 0 0 1-4.13 6.66l-.84.43a6.91 6.91 0 0 1-7.56-1.22l-2.36-2.36A10.06 10.06 0 0 0 28 85a11 11 0 0 0 0 22c1.94 0 4.75-1.16 6.11-2.53l2.36-2.36a6.93 6.93 0 0 1 7.56-1.22l.84.43a8.08 8.08 0 0 1 4.13 6.66V143h35.02z'%3E%3C/path%3E%3C/svg%3E");
      }
      &.dark {
        &.patterns {
          background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='192' height='192' viewBox='0 0 192 192'%3E%3Cpath fill='%23fcfcfc' fill-opacity='0.08' d='M192 15v2a11 11 0 0 0-11 11c0 1.94 1.16 4.75 2.53 6.11l2.36 2.36a6.93 6.93 0 0 1 1.22 7.56l-.43.84a8.08 8.08 0 0 1-6.66 4.13H145v35.02a6.1 6.1 0 0 0 3.03 4.87l.84.43c1.58.79 4 .4 5.24-.85l2.36-2.36a12.04 12.04 0 0 1 7.51-3.11 13 13 0 1 1 .02 26 12 12 0 0 1-7.53-3.11l-2.36-2.36a4.93 4.93 0 0 0-5.24-.85l-.84.43a6.1 6.1 0 0 0-3.03 4.87V143h35.02a8.08 8.08 0 0 1 6.66 4.13l.43.84a6.91 6.91 0 0 1-1.22 7.56l-2.36 2.36A10.06 10.06 0 0 0 181 164a11 11 0 0 0 11 11v2a13 13 0 0 1-13-13 12 12 0 0 1 3.11-7.53l2.36-2.36a4.93 4.93 0 0 0 .85-5.24l-.43-.84a6.1 6.1 0 0 0-4.87-3.03H145v35.02a8.08 8.08 0 0 1-4.13 6.66l-.84.43a6.91 6.91 0 0 1-7.56-1.22l-2.36-2.36A10.06 10.06 0 0 0 124 181a11 11 0 0 0-11 11h-2a13 13 0 0 1 13-13c2.47 0 5.79 1.37 7.53 3.11l2.36 2.36a4.94 4.94 0 0 0 5.24.85l.84-.43a6.1 6.1 0 0 0 3.03-4.87V145h-35.02a8.08 8.08 0 0 1-6.66-4.13l-.43-.84a6.91 6.91 0 0 1 1.22-7.56l2.36-2.36A10.06 10.06 0 0 0 107 124a11 11 0 0 0-22 0c0 1.94 1.16 4.75 2.53 6.11l2.36 2.36a6.93 6.93 0 0 1 1.22 7.56l-.43.84a8.08 8.08 0 0 1-6.66 4.13H49v35.02a6.1 6.1 0 0 0 3.03 4.87l.84.43c1.58.79 4 .4 5.24-.85l2.36-2.36a12.04 12.04 0 0 1 7.51-3.11A13 13 0 0 1 81 192h-2a11 11 0 0 0-11-11c-1.94 0-4.75 1.16-6.11 2.53l-2.36 2.36a6.93 6.93 0 0 1-7.56 1.22l-.84-.43a8.08 8.08 0 0 1-4.13-6.66V145H11.98a6.1 6.1 0 0 0-4.87 3.03l-.43.84c-.79 1.58-.4 4 .85 5.24l2.36 2.36a12.04 12.04 0 0 1 3.11 7.51A13 13 0 0 1 0 177v-2a11 11 0 0 0 11-11c0-1.94-1.16-4.75-2.53-6.11l-2.36-2.36a6.93 6.93 0 0 1-1.22-7.56l.43-.84a8.08 8.08 0 0 1 6.66-4.13H47v-35.02a6.1 6.1 0 0 0-3.03-4.87l-.84-.43c-1.59-.8-4-.4-5.24.85l-2.36 2.36A12 12 0 0 1 28 109a13 13 0 1 1 0-26c2.47 0 5.79 1.37 7.53 3.11l2.36 2.36a4.94 4.94 0 0 0 5.24.85l.84-.43A6.1 6.1 0 0 0 47 84.02V49H11.98a8.08 8.08 0 0 1-6.66-4.13l-.43-.84a6.91 6.91 0 0 1 1.22-7.56l2.36-2.36A10.06 10.06 0 0 0 11 28 11 11 0 0 0 0 17v-2a13 13 0 0 1 13 13c0 2.47-1.37 5.79-3.11 7.53l-2.36 2.36a4.94 4.94 0 0 0-.85 5.24l.43.84A6.1 6.1 0 0 0 11.98 47H47V11.98a8.08 8.08 0 0 1 4.13-6.66l.84-.43a6.91 6.91 0 0 1 7.56 1.22l2.36 2.36A10.06 10.06 0 0 0 68 11 11 11 0 0 0 79 0h2a13 13 0 0 1-13 13 12 12 0 0 1-7.53-3.11l-2.36-2.36a4.93 4.93 0 0 0-5.24-.85l-.84.43A6.1 6.1 0 0 0 49 11.98V47h35.02a8.08 8.08 0 0 1 6.66 4.13l.43.84a6.91 6.91 0 0 1-1.22 7.56l-2.36 2.36A10.06 10.06 0 0 0 85 68a11 11 0 0 0 22 0c0-1.94-1.16-4.75-2.53-6.11l-2.36-2.36a6.93 6.93 0 0 1-1.22-7.56l.43-.84a8.08 8.08 0 0 1 6.66-4.13H143V11.98a6.1 6.1 0 0 0-3.03-4.87l-.84-.43c-1.59-.8-4-.4-5.24.85l-2.36 2.36A12 12 0 0 1 124 13a13 13 0 0 1-13-13h2a11 11 0 0 0 11 11c1.94 0 4.75-1.16 6.11-2.53l2.36-2.36a6.93 6.93 0 0 1 7.56-1.22l.84.43a8.08 8.08 0 0 1 4.13 6.66V47h35.02a6.1 6.1 0 0 0 4.87-3.03l.43-.84c.8-1.59.4-4-.85-5.24l-2.36-2.36A12 12 0 0 1 179 28a13 13 0 0 1 13-13zM84.02 143a6.1 6.1 0 0 0 4.87-3.03l.43-.84c.8-1.59.4-4-.85-5.24l-2.36-2.36A12 12 0 0 1 83 124a13 13 0 1 1 26 0c0 2.47-1.37 5.79-3.11 7.53l-2.36 2.36a4.94 4.94 0 0 0-.85 5.24l.43.84a6.1 6.1 0 0 0 4.87 3.03H143v-35.02a8.08 8.08 0 0 1 4.13-6.66l.84-.43a6.91 6.91 0 0 1 7.56 1.22l2.36 2.36A10.06 10.06 0 0 0 164 107a11 11 0 0 0 0-22c-1.94 0-4.75 1.16-6.11 2.53l-2.36 2.36a6.93 6.93 0 0 1-7.56 1.22l-.84-.43a8.08 8.08 0 0 1-4.13-6.66V49h-35.02a6.1 6.1 0 0 0-4.87 3.03l-.43.84c-.79 1.58-.4 4 .85 5.24l2.36 2.36a12.04 12.04 0 0 1 3.11 7.51A13 13 0 1 1 83 68a12 12 0 0 1 3.11-7.53l2.36-2.36a4.93 4.93 0 0 0 .85-5.24l-.43-.84A6.1 6.1 0 0 0 84.02 49H49v35.02a8.08 8.08 0 0 1-4.13 6.66l-.84.43a6.91 6.91 0 0 1-7.56-1.22l-2.36-2.36A10.06 10.06 0 0 0 28 85a11 11 0 0 0 0 22c1.94 0 4.75-1.16 6.11-2.53l2.36-2.36a6.93 6.93 0 0 1 7.56-1.22l.84.43a8.08 8.08 0 0 1 4.13 6.66V143h35.02z'%3E%3C/path%3E%3C/svg%3E");
        }
        .cover {
          filter: brightness(0.6);
        }
      }
      .cover {
        width: auto;
        height: auto;
        min-height: 100%;
        opacity: 0;
        transition:
          filter 0.3s,
          opacity 0.3s;
        &.loaded {
          opacity: 1;
        }
      }
    }
    </style>
    
        <header class="main-header">
            <nav class="main-nav up top">
                <div class="nav-all">
                    
                     
                    <div class="left-nav">
                        
                        <div class="site-name" onclick="location.href='/'">
                            元视角
                        </div>
                    </div>
                    
                    
                    
                    <div class="nav-center">
                        <div class="site-menu"><div class="site-menu">
    
    <div class="menu-item">
        <span class="link-btn">文库</span>
        
        <div class="link-child">
            
            <span class="link-child-btn" onclick="window.location.href='\/archives'">
                
                <i class="iconfont icon-home"></i>
                
                文章列表
            </span>
            
            <span class="link-child-btn" onclick="window.location.href='\/categories'">
                
                <i class="iconfont icon-folder"></i>
                
                全部分类
            </span>
            
            <span class="link-child-btn" onclick="window.location.href='\/tags'">
                
                <i class="iconfont icon-hashtag"></i>
                
                全部标签
            </span>
            
        </div>
        
    </div>
    
    <div class="menu-item">
        <span class="link-btn">书影音</span>
        
        <div class="link-child">
            
            <span class="link-child-btn" onclick="window.location.href='\/reading'">
                
                <i class="iconfont icon-books"></i>
                
                读书
            </span>
            
            <span class="link-child-btn" onclick="window.location.href='\/watching'">
                
                <i class="iconfont icon-tv"></i>
                
                观影
            </span>
            
            <span class="link-child-btn" onclick="window.location.href='\/listening'">
                
                <i class="iconfont icon-music"></i>
                
                听歌
            </span>
            
        </div>
        
    </div>
    
    <div class="menu-item">
        <span class="link-btn">友链</span>
        
        <div class="link-child">
            
            <span class="link-child-btn" onclick="window.location.href='\/links'">
                
                <i class="iconfont icon-people"></i>
                
                友情链接
            </span>
            
        </div>
        
    </div>
    
    <div class="menu-item">
        <span class="link-btn">关于</span>
        
        <div class="link-child">
            
            <span class="link-child-btn" onclick="window.location.href='\/guestbook'">
                
                <i class="iconfont icon-chat"></i>
                
                留言板
            </span>
            
            <span class="link-child-btn" onclick="window.location.href='\/about'">
                
                <i class="iconfont icon-contacts"></i>
                
                关于本站
            </span>
            
        </div>
        
    </div>
    
</div></div>
                        <span class="site-title">
                            支持外部链接跳转的 Vue Router 扩展实现
                        </span>
                    </div>
                    
                    
                    <div class="right-nav">
                        
                        <a class="menu-btn nav-btn travellings" title="开往-友链接力" href="https://www.travellings.cn/go.html" target="_blank">
                            <i class="iconfont icon-subway"></i>
                        </a>
                        
                        <div class="menu-btn nav-btn" title="随机前往一篇文章">
                            <i class="iconfont icon-shuffle"></i>
                        </div>
                        
                        <div class="menu-btn nav-btn" title="全站搜索">
                            <i class="iconfont icon-search"></i>
                        </div>
                        
                        <div class="menu-btn nav-btn" id="themeToggle" title="切换主题模式">
                            <i class="iconfont icon-sun" id="themeIcon"></i>
                        </div>
                        
                        <div id="open-control" class="menu-btn nav-btn pc" title="打开中控台">
                            <i class="iconfont icon-dashboard"></i>
                        </div>
                        
                        <div class="to-top menu-btn hidden" title="返回顶部">
                            <div class="to-top-btn">
                                <span class="num">0</span>
                                <i class="iconfont icon-up"></i>
                            </div>
                        </div>
                        
                        <div class="menu-btn nav-btn mobile" title="打开菜单">
                            <i class="iconfont icon-toc"></i>
                        </div>
                    </div>
                </div>
            </nav>
            <div class="mobile-menu" id="mobileMenu">
    
    <div class="menu-mask"></div>
    <div class="menu-content s-card">
        
        <div class="close-control">
            <i class="iconfont icon-close"></i>
        </div>

        
        <div class="menu-list">
            
            <div class="menu-item">
                <span class="link-title">文库</span>
                
                <div class="link-child">
                    
                    <div class="link-child-btn" onclick="window.location.href='\/archives'">
                        
                        <i class="iconfont icon-home"></i>
                        
                        <span class="name">文章列表</span>
                    </div>
                    
                    <div class="link-child-btn" onclick="window.location.href='\/categories'">
                        
                        <i class="iconfont icon-folder"></i>
                        
                        <span class="name">全部分类</span>
                    </div>
                    
                    <div class="link-child-btn" onclick="window.location.href='\/tags'">
                        
                        <i class="iconfont icon-hashtag"></i>
                        
                        <span class="name">全部标签</span>
                    </div>
                    
                </div>
                
            </div>
            
            <div class="menu-item">
                <span class="link-title">书影音</span>
                
                <div class="link-child">
                    
                    <div class="link-child-btn" onclick="window.location.href='\/reading'">
                        
                        <i class="iconfont icon-books"></i>
                        
                        <span class="name">读书</span>
                    </div>
                    
                    <div class="link-child-btn" onclick="window.location.href='\/watching'">
                        
                        <i class="iconfont icon-tv"></i>
                        
                        <span class="name">观影</span>
                    </div>
                    
                    <div class="link-child-btn" onclick="window.location.href='\/listening'">
                        
                        <i class="iconfont icon-music"></i>
                        
                        <span class="name">听歌</span>
                    </div>
                    
                </div>
                
            </div>
            
            <div class="menu-item">
                <span class="link-title">友链</span>
                
                <div class="link-child">
                    
                    <div class="link-child-btn" onclick="window.location.href='\/links'">
                        
                        <i class="iconfont icon-people"></i>
                        
                        <span class="name">友情链接</span>
                    </div>
                    
                </div>
                
            </div>
            
            <div class="menu-item">
                <span class="link-title">关于</span>
                
                <div class="link-child">
                    
                    <div class="link-child-btn" onclick="window.location.href='\/guestbook'">
                        
                        <i class="iconfont icon-chat"></i>
                        
                        <span class="name">留言板</span>
                    </div>
                    
                    <div class="link-child-btn" onclick="window.location.href='\/about'">
                        
                        <i class="iconfont icon-contacts"></i>
                        
                        <span class="name">关于本站</span>
                    </div>
                    
                </div>
                
            </div>
            
        </div>
    </div>
</div>

<style>
.mobile-menu {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    z-index: 3000;
    display: none;
}

.mobile-menu .menu-mask {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: -1;
    background-color: var(--main-mask-background);
}

.mobile-menu .menu-content {
    position: absolute;
    top: 0;
    right: 0;
    height: 100%;
    width: 100%;
    max-width: 300px;
    border-radius: 12px 0 0 12px;
    padding: 20px;
    overflow: auto;
}

.mobile-menu .close-control {
    position: absolute;
    top: 10px;
    right: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 35px;
    height: 35px;
    padding: 0;
    transition: background-color 0.3s, opacity 0.3s;
    border-radius: 50%;
    cursor: pointer;
}

.mobile-menu .close-control .iconfont {
    font-size: 18px;
    line-height: 1;
    color: var(--main-font-second-color);
    transition: color 0.3s, opacity 0.3s;
}

.mobile-menu .close-control:hover {
    background-color: var(--main-color);
}

.mobile-menu .close-control:hover .iconfont {
    color: var(--main-card-background);
}

.mobile-menu .menu-list {
    margin-top: 40px;
}

.mobile-menu .menu-item {
    margin-bottom: 12px;
}

.mobile-menu .menu-item .link-title {
    font-size: 14px;
    margin-bottom: 12px;
    display: inline-block;
    color: var(--main-font-second-color);
}

.mobile-menu .menu-item .link-child {
    display: grid;
    gap: 12px;
    grid-template-columns: 1fr 1fr;
}

.mobile-menu .menu-item .link-child-btn {
    display: flex;
    flex-direction: row;
    justify-content: flex-start;
    align-items: center;
    border-radius: 8px;
    padding: 10px 12px;
    background-color: var(--main-card-background);
    border: 1px solid var(--main-card-border);
    box-shadow: 0 8px 16px -4px var(--main-border-shadow);
    font-size: 15px;
    cursor: pointer;
    transition: all 0.3s;
}

.mobile-menu .menu-item .link-child-btn:hover {
    background-color: var(--main-color);
    color: var(--main-card-background);
}

.mobile-menu .menu-item .link-child-btn .iconfont {
    margin-right: 6px;
    opacity: 0.6;
}

.mobile-menu .menu-item .link-child-btn .name {
    max-width: 80px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}
</style>

<script>
function toggleMobileMenu() {
    const mobileMenu = document.getElementById('mobileMenu');
    if (mobileMenu) {
        mobileMenu.style.display = mobileMenu.style.display === 'none' ? 'block' : 'none';
    }
}
</script> <div class="modal search-modal" id="searchModal">
  <div class="modal-container">
    <div class="modal-header">
      <div class="modal-title">
        <i class="iconfont icon-search"></i>
        <span>全局搜索</span>
      </div>
      <div class="modal-close">
        <i class="iconfont icon-close"></i>
      </div>
    </div>

    <div class="search-container">
      <div class="search-box">
        <input 
          type="text" 
          id="searchInput"
          placeholder="想要搜点什么" 
          autocomplete="off"
          autofocus
        >
      </div>

      <div class="search-results" id="searchResults">
        <div class="no-result" id="noResult" style="display: none;">
          <i class="iconfont icon-search-empty"></i>
          <span class="text">搜索结果为空</span>
        </div>
        <div class="search-list" id="searchList"></div>
      </div>

      <div class="search-stats">
        <span class="text" id="searchStats"></span>
      </div>
    </div>
  </div>
</div>

<style>
.search-modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.5);
  z-index: 999;
  display: none;
}

.modal-container {
  position: relative;
  width: 90%;
  max-width: 768px;
  margin: 80px auto;
  background-color: var(--main-card-background);
  border-radius: 12px;
  padding: 1.5rem;
}

.modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 1rem;
}

.modal-title {
  display: flex;
  align-items: center;
  font-size: 1.2rem;
  font-weight: bold;
}

.modal-title .iconfont {
  margin-right: 0.5rem;
}

.modal-close {
  cursor: pointer;
  padding: 0.5rem;
}

.search-box input {
  width: 100%;
  outline: none;
  border-radius: 8px;
  font-size: 16px;
  padding: 0.6rem 1rem;
  color: var(--main-font-color);
  font-family: var(--main-font-family);
  border: 1px solid var(--main-card-border);
  background-color: var(--main-card-second-background);
  transition: border-color 0.3s, box-shadow 0.3s;
}

.search-box input:focus {
  border-color: var(--main-color);
  box-shadow: 0 8px 16px -4px var(--main-color-bg);
}

.search-results {
  margin-top: 20px;
  min-height: 300px;
}

.no-result {
  height: 300px;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}

.no-result .iconfont {
  font-size: 40px;
  margin-bottom: 12px;
}

.no-result .text {
  font-size: 18px;
  opacity: 0.6;
}

.search-list .search-item {
  margin-bottom: 12px;
  padding: 1rem;
  border-radius: 8px;
  background-color: var(--main-card-second-background);
  cursor: pointer;
  transition: transform 0.3s;
}

.search-list .search-item:hover {
  transform: translateY(-2px);
}

.search-item .title {
  font-size: 16px;
  margin-bottom: 6px;
}

.search-item .content {
  color: var(--main-font-second-color);
  font-size: 14px;
  margin-top: 8px;
}

.search-stats {
  margin-top: 1rem;
  font-size: 14px;
  color: var(--main-font-second-color);
}

.highlight {
  color: var(--main-color);
  background: transparent;
}
</style> </header>

        
        <main class="main-layout">



<div class="post">
    <div class="post-meta">
        <div class="meta">
            
            <div class="categories">
                
                
                <a href="/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91" class="cat-item">
                    <i class="iconfont icon-folder"></i>
                    <span class="name">前端开发</span>
                </a>
                
                
            </div>
            
            <div class="tags">
                
                
                <a href="/tags/%E5%89%8D%E7%AB%AF" class="tag-item">
                    <i class="iconfont icon-hashtag"></i>
                    <span class="name">前端</span>
                </a>
                
                <a href="/tags/vue" class="tag-item">
                    <i class="iconfont icon-hashtag"></i>
                    <span class="name">Vue</span>
                </a>
                
                <a href="/tags/%E8%B7%AF%E7%94%B1" class="tag-item">
                    <i class="iconfont icon-hashtag"></i>
                    <span class="name">路由</span>
                </a>
                
                <a href="/tags/%E6%80%9D%E8%80%83" class="tag-item">
                    <i class="iconfont icon-hashtag"></i>
                    <span class="name">思考</span>
                </a>
                
                
            </div>
        </div>
        <h1 class="title">
            支持外部链接跳转的 Vue Router 扩展实现
        </h1>
        <div class="other-meta">
            
            <span class="meta date">
                <i class="iconfont icon-date"></i>
                2022-07-12
            </span>
            
            <span class="update meta">
                <i class="iconfont icon-time"></i>
                2022-07-12
            </span>
            
            <span class="hot meta">
                <i class="iconfont icon-fire"></i>
                <span id="twikoo_visitors" class="artalk-pv-count">0</span>
            </span>
            
            <span class="chat meta hover" data-scroll-to="comments">
                <i class="iconfont icon-chat"></i>
                <span id="twikoo_comments" class="artalk-comment-count">0</span>
            </span>
        </div>
    </div>
    <div class="post-content">
        <article class="post-article s-card">
            
            
            
            <div class="expired s-card">
                本文发表于 <strong>993</strong> 天前，其中的信息可能已经事过境迁
            </div>
            

            
<div class="article-gpt s-card">
  <div class="title">
    <span class="name">
      <i class="iconfont icon-robot"></i>
      文章摘要
      <i class="iconfont icon-up"></i>
    </span>
    <span class="logo">FakeGPT</span>
  </div>
  <div class="content s-card">
    <span class="text"></span>
  </div>
  <div class="meta">
    
    
  </div>
</div>
<script src="https://npm.elemecdn.com/typeit@8.7.1/dist/index.umd.js"></script>
<script>
document.addEventListener("DOMContentLoaded", function () {
    new TypeIt(".article-gpt .content .text", {
        strings: 'Vue Router 是 Vue 中重要的插件，特别在单页面应用中起着关键作用。随着页面概念逐渐消失，路由根据URL确定显示内容。文章介绍了处理内部和外部链接的问题，提出了在 Vue Router 基础上实现外部链接跳转的扩展思路。通过自定义组件 MyRouterLink，区分内部和外部链接并支持传递URL参数，解决了 Vue Router 不支持外部链接的问题。讨论了如何给出站链接携带令牌信息，通过指令或组件内部处理统一附加参数。最终强调了在项目中统一使用规范化组件的重要性。',
        speed: 10,
        lifeLike: true,
        waitUntilVisible: true,
    }).go();
});
</script>



            
            <div id="page-content" class="markdown-main-style">
                <p>众所周知，<a href="https://v3.router.vuejs.org/zh/installation.html">Vue Router</a> 是 <a href="https://cn.vuejs.org/">Vue</a> 中重要的插件之一，特别是在当下流行的 <a href="https://docs.microsoft.com/zh-cn/aspnet/single-page-application/overview/">单页面应用/SPA</a> 中，这种感觉会越来越明显。此时，路由的作用就是根据 <code>URL</code> 来决定要显示什么内容。诚然，页面这个概念在工程/模块中依然存在，可当你开始关注最终发布的产物时，你会发现本质上它只有一个页面。无论你选择 <code>hash</code> 或者是 <code>history</code> 模式的路由，它都像是在同一张纸上反复写写画画，让你看起来觉得它有很多个不同的页面。回顾早期的前端项目，它往往会有多个不同的页面组成，我们是通过一个个的超链接来实现不同页面间的跳转。如今，这一切都已一去不复返，我们只能在单页面应用的世界里继续披荆斩棘。当然，绝大多数的普通用户无法感知到这种程度的变化，在他们的眼中，那依然不过是普通的一个超链接。那么，当一个项目中充斥着各种各样的超链接的时候，这个问题就值得我们单独拿出来讲一讲。所以，今天这篇博客的主题是路由和外部链接。请注意，这是一组相对通用的概念，不受限于任何一个前端框架，我们只是选择了使用 <code>Vue</code> 来进行说明。</p>
<h1 id="问题现状">问题现状</h1>
<p>我们的项目存在着大量的超链接以及导航菜单，在 UI 设计阶段，通常不会有人关心，一个链接到底是内部链接还是外部链接。与此同时，由于 <code>HTML</code> 这门标记语言的极大灵活性，实现一个导航链接的方式有 N 多种，可以是一个 <code>a</code> 标签，可以是一个 <code>div</code> 标签，甚至可以是一个 <code>span</code> 标签。虽然 <a href="https://v3.router.vuejs.org/zh/installation.html">Vue Router</a> 里提供了 <code>router-link</code> 组件，可在实际的项目中，需要综合考虑团队风格和第三方 UI 库的因素，甚至有时候，再没有设计规范的情况下，可能大家连 <code>router-link</code> 组件都不愿意用或者说压根就没机会用。</p>
<p>这样就造成一个非常尴尬的局面，当你需要为页面编写业务代码的时候，你不得不在各种各样的超链接上浪费时间，只要不是通过 <code>a</code> 标签实现的，你都必须处理它点击的事件，更不必说，你还要区分这个链接是一个内部链接还是一个外部链接，原因是 <a href="https://v3.router.vuejs.org/zh/installation.html">Vue Router</a> 不支持外部链接，你不得不通过 <code>window.location</code> 或者 <code>window.open()</code> 的这样的方式来实现“曲线救国”，试想，如果每一个都这么折腾一遍，你还会觉得有趣吗？</p>
<p>而在我们的项目里，实际上它还需要从网页端唤起应用，这样便又涉及到了 <a href="https://sspai.com/post/31500">URL Schemes</a> 这个话题。除了 <code>Android</code> 和 <code>iOS</code> 这个平台上的差异，单单就 <code>Windows</code> 而言，其基于注册表的方案对协议提供者的约束并不强，如果团队内对此没有任何规范的话，你将面对各种千奇百怪的参数传递方式。听到这里，你是不是感觉头都大了一圈？如果因为某种原因，它还需要你每次都传递一个令牌过去，你告诉我，你准备如何让这一切的混乱与不堪重新归于宁静呢？</p>
<p><a  class="img-fancybox" href="/posts/implementation-of-vue-router-extension-that-supports-external-link/standup-paddleboarding-g737c60ff8_1280.jpg" data-fancybox="gallery" data-src="/posts/implementation-of-vue-router-extension-that-supports-external-link/standup-paddleboarding-g737c60ff8_1280.jpg" data-caption="学如逆水行舟，不进则退">
    <img src="/posts/implementation-of-vue-router-extension-that-supports-external-link/standup-paddleboarding-g737c60ff8_1280.jpg" alt="学如逆水行舟，不进则退"  class="post-img" loading="lazy">
    <span class="post-img-tip">学如逆水行舟，不进则退</span>
</a> </p>
<h1 id="改进思路">改进思路</h1>
<p>OK，现在假设，我们制止这场混乱的方式，是强迫大家都去使用 <code>router-link</code> 这个组件，虽然它最终渲染出来就是一个 <code>a</code> 标签。相信参加工作以后，大家都会有这样一种感觉，那就是工作中 99.9% 的事情，都是在最好和最坏中间选一个过渡状态，然后不断地为之投入精力或者叫做填坑，甚至有很多东西，从来都不是为了让一件事情变得更好而存在。作为这个地球上脆弱而渺小的个体，时间、生命、爱，每一样东西都像缓缓从指尖滑落的沙子，我们实在是太喜欢这种可以掌控点什么的感觉了。所以，如果一件事情没法从道理或者科学上讲通的话，那就用制度或者规范来作为武器，在一个连国家都可以宣布破产的年代，大概，话语权比是非对错更重要。因此，在博主的博客里，在这小小的一方天地里，不妨假设我有这种话语权，可以强迫大家都使用 <code>router-link</code> 这个组件。我们讲，<code>Vue Router</code> 不支持外部链接，一个非常直观的理由是，当我们写出下面的代码时，它会完全辜负我们的期望：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">router-link</span> <span class="na">to</span><span class="o">=</span><span class="s">&#34;https://blog.yuanpei.me&#34;</span><span class="p">&gt;</span><span class="nx">Go</span><span class="o">&lt;</span><span class="err">/router-link&gt;</span>
</span></span></code></pre></div><p>显然，我们期望它可以跳转到 <a href="https://blog.yuanpei.me">https://blog.yuanpei.me</a> 这个地址，可你只要亲自试一下，就会知道这是你的一厢情愿。因为，此时浏览器地址栏中的地址会显示为：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">http://localhost:8080/#/https://https://blog.yuanpei.me
</span></span></code></pre></div><p>当然，我们的用户不会操心这种事情，正如他们从来不会去刻意地分辨，这是一个内部链接还是一个外部链接。这里讲一下博主的思路，博主打算在 <code>router-link</code> 的基础上再做一层封装，内部链接通常是以<code>/</code> 来开头的，基于这个特点，我们可以区分出这是一个内部链接还是一个外部链接。针对内部链接，我们继续使用 <code>router-link</code> 组件；针对外部链接，我们直接使用 <code>a</code> 标签即可。此时，对应的 <code>Vue</code> 模板定义如下：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">a</span> <span class="nt">v-if</span><span class="s">=&#34;isExternal&#34; :href=&#34;formatedUrl&#34; </span><span class="nt">:target</span><span class="s">=&#34;target&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">slot</span><span class="p">&gt;&lt;/</span><span class="nt">slot</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">router-link</span> <span class="na">v</span><span class="nt">-else</span> <span class="nt">v-bind</span><span class="s">=&#34;originProps&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">slot</span><span class="p">&gt;&lt;/</span><span class="nt">slot</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="o">&lt;</span><span class="err">/router-link&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</span></span></code></pre></div><p>在这里，我们对外暴露了 <code>to</code> 和 <code>target</code> 两个属性，前者允许我们传入一个字符串或者对象，后者可以控制这个链接的打开方式，是在当前窗口还是一个新窗口中打开：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="kr">export</span> <span class="k">default</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">name</span><span class="o">:</span> <span class="s2">&#34;MyRouterLink&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">props</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">to</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">type</span><span class="o">:</span> <span class="p">[</span><span class="nb">Object</span><span class="p">,</span> <span class="nb">String</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">      <span class="k">default</span><span class="o">:</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span> 
</span></span><span class="line"><span class="cl">        <span class="nx">path</span><span class="o">:</span> <span class="s1">&#39;/&#39;</span>
</span></span><span class="line"><span class="cl">      <span class="p">},</span>
</span></span><span class="line"><span class="cl">      <span class="nx">required</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="nx">target</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">type</span><span class="o">:</span> <span class="nb">String</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="k">default</span><span class="o">:</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></div><p>还记得我们是怎么区分内部链接和外部链接的吗？只需要判断传入的 <code>URL</code> 是否以 <code>/</code> 开头。在这里，我们需要对 <code>to</code> 的类型进行判断：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="nx">computed</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">isExternal</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">to</span><span class="p">)</span> <span class="o">===</span> <span class="s1">&#39;object&#39;</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">to</span><span class="p">.</span><span class="nx">path</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">to</span><span class="p">.</span><span class="nx">path</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!==</span> <span class="s1">&#39;/&#39;</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">to</span><span class="p">)</span> <span class="o">===</span> <span class="s1">&#39;string&#39;</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">to</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">to</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!==</span> <span class="s1">&#39;/&#39;</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">      
</span></span><span class="line"><span class="cl">      <span class="k">return</span> <span class="kc">false</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>当然，在某些情况下，这个 <code>URL</code> 允许使用者传入查询参数(QueryString)。这里，我们用 <code>formatedUrl</code> 这个计算属性来统一进行处理：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="nx">computed</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">formatedUrl</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="s2">&#34;&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">to</span><span class="p">)</span> <span class="o">===</span> <span class="s1">&#39;object&#39;</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">url</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">to</span><span class="p">.</span><span class="nx">path</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">to</span><span class="p">)</span> <span class="o">===</span> <span class="s1">&#39;string&#39;</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">url</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">to</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="kd">let</span> <span class="nx">queryArray</span> <span class="o">=</span> <span class="p">[];</span>
</span></span><span class="line"><span class="cl">      <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">to</span><span class="p">.</span><span class="nx">query</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">key</span> <span class="k">in</span> <span class="k">this</span><span class="p">.</span><span class="nx">to</span><span class="p">.</span><span class="nx">query</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="kr">const</span> <span class="nx">value</span> <span class="o">=</span> <span class="nb">encodeURIComponent</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">to</span><span class="p">.</span><span class="nx">query</span><span class="p">[</span><span class="nx">key</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">          <span class="nx">queryArray</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="nx">key</span><span class="si">}</span><span class="sb">=</span><span class="si">${</span><span class="nx">value</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="k">if</span> <span class="p">(</span><span class="nx">queryArray</span><span class="p">.</span><span class="nx">length</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="nx">url</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="k">if</span> <span class="p">(</span><span class="nx">url</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s2">&#34;?&#34;</span><span class="p">)</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">url</span> <span class="o">=</span> <span class="sb">`</span><span class="si">${</span><span class="nx">url</span><span class="si">}${</span><span class="nx">queryArray</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&#34;&amp;&#34;</span><span class="p">)</span><span class="si">}</span><span class="sb">`</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">url</span> <span class="o">=</span> <span class="sb">`</span><span class="si">${</span><span class="nx">url</span><span class="si">}</span><span class="sb">?</span><span class="si">${</span><span class="nx">queryArray</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&#34;&amp;&#34;</span><span class="p">)</span><span class="si">}</span><span class="sb">`</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="k">return</span> <span class="nx">url</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>最后，需要特别说明的是 <code>originProps</code> 这个计算属性，虽然我们封装了 <code>router-link</code> 这个组件，但我们希望这个新组件是兼容  <code>router-link</code> 本身自带的属性的。此时，我们可以采用下面的方式来处理，具体可以参考官方文档：<a href="https://cn.vuejs.org/v2/api/#vm-attrs">vm.$attrs</a>：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="nx">computed</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">originProps</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">return</span> <span class="p">{</span> <span class="p">...</span><span class="k">this</span><span class="p">.</span><span class="nx">$props</span><span class="p">,</span> <span class="p">...</span><span class="k">this</span><span class="p">.</span><span class="nx">$attrs</span> <span class="p">};</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>现在，万事具备，我们来试用一下这个新的组件，看看效果如何：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">header</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">my-router-link</span> <span class="na">to</span><span class="o">=</span><span class="s">&#34;/home&#34;</span><span class="p">&gt;</span><span class="nx">首页</span><span class="o">&lt;</span><span class="err">/my-router-link&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">my-router-link</span> <span class="na">to</span><span class="o">=</span><span class="s">&#34;/message&#34;</span><span class="p">&gt;</span><span class="nx">消息</span><span class="o">&lt;</span><span class="err">/my-router-link&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">my-router-link</span> <span class="na">to</span><span class="o">=</span><span class="s">&#34;https://blog.yuanpei.me&#34;</span> <span class="na">target</span><span class="o">=</span><span class="s">&#34;_blank&#34;</span><span class="p">&gt;</span><span class="nx">博客</span><span class="o">&lt;</span><span class="err">/my-router-link&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">my-router-link</span>
</span></span><span class="line"><span class="cl">       <span class="o">:</span><span class="na">to</span><span class="o">=</span><span class="s">&#34;{ path: &#39;https://www.baidu.com/s&#39;, query: { wd: &#39;天气&#39; } }&#34;</span>
</span></span><span class="line"><span class="cl">       <span class="na">target</span><span class="o">=</span><span class="s">&#34;_blank&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">       <span class="nx">百度</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;</span><span class="err">/my-router-link&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">my-router-link</span>
</span></span><span class="line"><span class="cl">       <span class="o">:</span><span class="na">to</span><span class="o">=</span><span class="s">&#34;{
</span></span></span><span class="line"><span class="cl"><span class="s">          path: &#39;tencent://&#39;,
</span></span></span><span class="line"><span class="cl"><span class="s">          query: { uin: &#39;875974254&#39;, site: &#39;Vue&#39;, menu: &#39;yes&#39; },
</span></span></span><span class="line"><span class="cl"><span class="s">        }&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">       <span class="nx">QQ</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;</span><span class="err">/my-router-link&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">header</span><span class="p">&gt;</span>
</span></span></code></pre></div><p>我们可以注意到，现在它可以同时支持内部链接和外部链接，并且我们可以传递一个对象来更好地控制 <code>URL</code> 的细节，当然，它还可以从桌面唤起 <code>QQ</code> 应用，只要协议提供方采用类似的传参方式，那么，这个方案其实可以做到一劳永逸的。完整的代码我已上传到 <a href="https://github.com/Regularly-Archive/2022/tree/main/src/front-mock">Github</a>，方便大家可以做进一步的探索。</p>
<p><a  class="img-fancybox" href="/posts/implementation-of-vue-router-extension-that-supports-external-link/%e4%bb%8e%e7%bd%91%e9%a1%b5%e7%ab%af%e5%94%a4%e8%b5%b7%e5%ba%94%e7%94%a8.png" data-fancybox="gallery" data-src="/posts/implementation-of-vue-router-extension-that-supports-external-link/%e4%bb%8e%e7%bd%91%e9%a1%b5%e7%ab%af%e5%94%a4%e8%b5%b7%e5%ba%94%e7%94%a8.png" data-caption="从网页端唤起应用">
    <img src="/posts/implementation-of-vue-router-extension-that-supports-external-link/%e4%bb%8e%e7%bd%91%e9%a1%b5%e7%ab%af%e5%94%a4%e8%b5%b7%e5%ba%94%e7%94%a8.png" alt="从网页端唤起应用"  class="post-img" loading="lazy">
    <span class="post-img-tip">从网页端唤起应用</span>
</a> </p>
<h1 id="话题延伸">话题延伸</h1>
<p>坦白讲，在我写这篇文章的时候，我一直在思考一个问题，即：如何给所有出站的超链接携带令牌信息？这个想法其实是在解决别人产生的问题，譬如，从子系统 <code>A</code> 跳转到子系统 <code>B</code> 的过程中，为了实现所谓的“免登录”，大佬们提议直接把令牌信息附加到 <code>URL</code>上传递过去，先不说令牌信息刷新和过期的问题，就单单是令牌信息附加到 <code>URL</code>上这一项，看起来都是非常愚蠢的做法，众所周知，浏览器对针对 <code>GET</code> 请求时的 <code>URL</code> 长度存在限制，你这不是直愣愣地往人家枪口上撞吗？放着 <a href="https://www.apereo.org/projects/cas">CAS</a>、<a href="https://www.keycloak.org/">Keycloak</a> 这种成熟的方案不用，非要用这种掩耳盗铃式的半桶水方案？也许，人类还真就喜欢做这样的事情，毕竟这样可以制造出问题和麻烦，让别人有事可做。听我说，谢谢你，因为有你&hellip;吐槽归吐槽，一开始我是写了一个自定义指令来做这个事情：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="nx">Vue</span><span class="p">.</span><span class="nx">directive</span><span class="p">(</span><span class="s1">&#39;attach-query-string&#39;</span><span class="p">,</span><span class="kd">function</span> <span class="p">(</span><span class="nx">el</span><span class="p">,</span> <span class="nx">binding</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="nx">el</span><span class="p">.</span><span class="nx">tagName</span> <span class="o">===</span> <span class="s1">&#39;A&#39;</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">token</span> <span class="o">=</span> <span class="nx">resolveToken</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">userId</span> <span class="o">=</span> <span class="nx">resolveUserId</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">posting</span> <span class="o">=</span> <span class="nx">resolvePostings</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="nx">el</span><span class="p">.</span><span class="nx">href</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s1">&#39;?&#39;</span><span class="p">)</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">      <span class="nx">el</span><span class="p">.</span><span class="nx">href</span> <span class="o">=</span> <span class="sb">`</span><span class="si">${</span><span class="nx">el</span><span class="p">.</span><span class="nx">href</span><span class="si">}</span><span class="sb">&amp;token=</span><span class="si">${</span><span class="nx">token</span><span class="si">}</span><span class="sb">&amp;userId=</span><span class="si">${</span><span class="nx">userId</span><span class="si">}</span><span class="sb">&amp;deviceType=</span><span class="si">${</span><span class="nx">DeviceType</span><span class="p">.</span><span class="nx">RCT</span><span class="si">}</span><span class="sb">&amp;posting=</span><span class="si">${</span><span class="nx">posting</span><span class="si">}</span><span class="sb">`</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">el</span><span class="p">.</span><span class="nx">href</span> <span class="o">=</span> <span class="sb">`</span><span class="si">${</span><span class="nx">el</span><span class="p">.</span><span class="nx">href</span><span class="si">}</span><span class="sb">?token=</span><span class="si">${</span><span class="nx">token</span><span class="si">}</span><span class="sb">&amp;userId=</span><span class="si">${</span><span class="nx">userId</span><span class="si">}</span><span class="sb">&amp;deviceType=</span><span class="si">${</span><span class="nx">DeviceType</span><span class="p">.</span><span class="nx">RCT</span><span class="si">}</span><span class="sb">&amp;posting=</span><span class="si">${</span><span class="nx">posting</span><span class="si">}</span><span class="sb">`</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span></code></pre></div><p>注意到，这个指令只对 <code>a</code> 标签有效，所以，那些花里胡哨、奇形怪状的超链接依然是个令人头疼的问题，我们先忽略它们就好：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-vue" data-lang="vue"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">a</span> 
</span></span><span class="line"><span class="cl">    <span class="nt">:href</span><span class="s">=&#34;item.link&#34;</span> 
</span></span><span class="line"><span class="cl">    <span class="o">:</span><span class="na">target</span><span class="o">=</span><span class="s">&#34;item.openNewTab ? &#39;_blank&#39; : &#39;_self&#39;&#34;</span> 
</span></span><span class="line"><span class="cl">    <span class="na">v</span><span class="nt">-attach-query-string</span>
</span></span><span class="line"><span class="cl"><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">{{</span> <span class="nx">item</span><span class="p">.</span><span class="nx">name</span> <span class="p">}}</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
</span></span></code></pre></div><p>这个指令表示，它将会在 <code>mounted</code> 和 <code>updated</code> 的时候触发相应的逻辑，对于大多数的超链接而言，其 <code>src</code> 只会初始化一次，所以，这个方案基本上可行的，唯一的难点在于，并不是所有人都会如你期望的那样使用 <code>a</code> 标签。当然，我内心深处永远相信 <code>jQuery</code> 一把梭，所以，通常尝试过 <code>querySelectorAll()</code> ，但我始终觉得这样子显得有点丑陋，说好的不再操作 <code>DOM</code> 了呢？如果按照我们现在的思路，其实可以在组件内部统一处理，下面是一个简单的实现：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl">  <span class="nx">computed</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">formatedUrl</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="s2">&#34;&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">to</span><span class="p">)</span> <span class="o">===</span> <span class="s1">&#39;object&#39;</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">url</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">to</span><span class="p">.</span><span class="nx">path</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">to</span><span class="p">)</span> <span class="o">===</span> <span class="s1">&#39;string&#39;</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">url</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">to</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="kd">let</span> <span class="nx">queryArray</span> <span class="o">=</span> <span class="p">[];</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="c1">// 统一追加参数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="kr">const</span> <span class="nx">token</span> <span class="o">=</span> <span class="nx">resolveToken</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">      <span class="kr">const</span> <span class="nx">userId</span> <span class="o">=</span> <span class="nx">resolveUserId</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">      <span class="kr">const</span> <span class="nx">posting</span> <span class="o">=</span> <span class="nx">resolvePostings</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span>
</span></span><span class="line"><span class="cl">      <span class="nx">queryArray</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="sb">`token=</span><span class="si">${</span><span class="nx">token</span><span class="si">}</span><span class="sb">`</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="nx">queryArray</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="sb">`userId=</span><span class="si">${</span><span class="nx">userId</span><span class="si">}</span><span class="sb">`</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="nx">queryArray</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="sb">`posting=</span><span class="si">${</span><span class="nx">posting</span><span class="si">}</span><span class="sb">`</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      
</span></span><span class="line"><span class="cl">      <span class="c1">// 处理组件传入的参数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">to</span><span class="p">.</span><span class="nx">query</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">key</span> <span class="k">in</span> <span class="k">this</span><span class="p">.</span><span class="nx">to</span><span class="p">.</span><span class="nx">query</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="kr">const</span> <span class="nx">value</span> <span class="o">=</span> <span class="nb">encodeURIComponent</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">to</span><span class="p">.</span><span class="nx">query</span><span class="p">[</span><span class="nx">key</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">          <span class="nx">queryArray</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="nx">key</span><span class="si">}</span><span class="sb">=</span><span class="si">${</span><span class="nx">value</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="k">if</span> <span class="p">(</span><span class="nx">queryArray</span><span class="p">.</span><span class="nx">length</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="nx">url</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="k">if</span> <span class="p">(</span><span class="nx">url</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s2">&#34;?&#34;</span><span class="p">)</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">url</span> <span class="o">=</span> <span class="sb">`</span><span class="si">${</span><span class="nx">url</span><span class="si">}${</span><span class="nx">queryArray</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&#34;&amp;&#34;</span><span class="p">)</span><span class="si">}</span><span class="sb">`</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">url</span> <span class="o">=</span> <span class="sb">`</span><span class="si">${</span><span class="nx">url</span><span class="si">}</span><span class="sb">?</span><span class="si">${</span><span class="nx">queryArray</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&#34;&amp;&#34;</span><span class="p">)</span><span class="si">}</span><span class="sb">`</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="k">return</span> <span class="nx">url</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span></code></pre></div><p>从本质上讲，这两种方案做得事情是完全相同的，无非是拥有了新知识或者技能以后，再去重新审视过去的种种选择，人虽然始终没有办法打破自身的历史局限性，可是能从新知识或者技能中不断丰富自我的认知，这又属实是种颇具幸福感的事情，因为，从这一刻起，你已经告别了昨天的自己，真正做到了“且将新火试新茶”。回过头来再次审视这个问题的时候，你会觉得哪一种更好呢？欢迎大家在评论区留下你的答案。</p>
<h1 id="本文小结">本文小结</h1>
<p>本文介绍了一种针对 <a href="https://v3.router.vuejs.org/zh/installation.html">Vue Router</a> 进行扩展的思路，主要是为了解决 <code>router-link</code> 不支持外部链接跳转的问题。关注这个问题的契机，则是来源于项目中大量存在着的超链接和导航菜单。其中，除了指向站内的内部链接，还有指向站外的外部链接，而这些外部链接中，又牵扯到从网页端唤醒应用的问题，所以，我们需要一种相对统一的机制来处理这些内部细节，因此，就有了今天的这篇博客。除此以外，因为一部分人的愚蠢决定，我们必须要在所有出站的 <code>URL</code> 上附加令牌信息，针对这个问题，博主先是尝试了自定义指令的做法，然后又在现在的方案上做了一点处理，这使得我们能把精力放在真正重要的地方。从整体上而言，如果在设计 UI 前，就定好这样一种规范，所有人都使用这个统一的组件，这个问题处理起来会稍微简单一点，可惜，从人类让一群人一起编程的那一刻起，这种人与人间的磨合和牵制就会一直存在，正所谓“有人的地方就有江湖”，身处江湖的人，多少会有点身不由己的磕磕绊绊，本文完！</p>

            </div>

            
            
            
<div class="copyright s-card">
  <div class="title">
    <span class="post-name">支持外部链接跳转的 Vue Router 扩展实现</span>
    
    <a :href="http://localhost:1313/posts/implementation-of-vue-router-extension-that-supports-external-link/" class="post-link" target="_blank">
      http://localhost:1313/posts/implementation-of-vue-router-extension-that-supports-external-link/
    </a>
    
  </div>
  <div class="post-meta">
    <div class="meta-item">
      <span class="tip">作者</span>
      <span class="name">飞鸿踏雪</span>
    </div>
    
    <div class="meta-item">
      <span class="tip">发布于</span>
      <span class="name">2022-07-12</span>
    </div>
    
    
    <div class="meta-item">
      <span class="tip">更新于</span>
      <span class="name">2022-07-12</span>
    </div>
    
    
    <div class="meta-item cc">
      <span class="tip">许可协议</span>
      <a class="name" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh-hans" target="_blank">
        CC BY-NC-SA 4.0
      </a>
    </div>
    
  </div>
  <span class="meta-tip">署名-非商业性使用-相同方式共享 4.0 国际</span>
</div>

            

            
            <div class="other-meta">
                <div class="all-tags">
                    
                    
                    <a href="/tags/%E5%89%8D%E7%AB%AF" class="tag-item">
                        <i class="iconfont icon-hashtag"></i>
                        <span class="name">前端</span>
                    </a>
                    
                    <a href="/tags/vue" class="tag-item">
                        <i class="iconfont icon-hashtag"></i>
                        <span class="name">Vue</span>
                    </a>
                    
                    <a href="/tags/%E8%B7%AF%E7%94%B1" class="tag-item">
                        <i class="iconfont icon-hashtag"></i>
                        <span class="name">路由</span>
                    </a>
                    
                    <a href="/tags/%E6%80%9D%E8%80%83" class="tag-item">
                        <i class="iconfont icon-hashtag"></i>
                        <span class="name">思考</span>
                    </a>
                    
                    
                </div>
                <a href="https://eqnxweimkr5.feishu.cn/share/base/form/shrcnCXCPmxCKKJYI3RKUfefJre" 
                   class="report" 
                   target="_blank">
                    <i class="iconfont icon-report"></i>
                    反馈与投诉
                </a>
            </div>

            
            
<div class="reward">
  <div class="reward-btn" onclick="document.getElementById('rewardModal').style.display='block'">
    <i class="iconfont icon-reward"></i>
    <span class="text">赞赏博主</span>
  </div>

  
  <div id="rewardModal" class="modal" style="display: none;">
    <div class="modal-mask" onclick="document.getElementById('rewardModal').style.display='none'"></div>
    <div class="modal-container">
      <div class="modal-header">
        <span class="modal-title">
          <i class="iconfont icon-reward"></i>
          赞赏博主
        </span>
        <span class="modal-close" onclick="document.getElementById('rewardModal').style.display='none'">
          <i class="iconfont icon-close"></i>
        </span>
      </div>
      
      <div class="modal-content">
        <div class="reward-card">
          <span class="thank">🙏 感谢您赐予我前进的力量</span>
          <div class="qr">
            
            <a href="/images/reward/wechat.jpg" class="qr-img" target="_blank">
              <img src="/images/reward/wechat.jpg" alt="微信" />
              <span class="tip">
                <i class="iconfont icon-wechat-pay"></i>
                微信
              </span>
            </a>
            
            
            
            <a href="/images/reward/alipay.jpg" class="qr-img" target="_blank">
              <img src="/images/reward/alipay.jpg" alt="支付宝" />
              <span class="tip">
                <i class="iconfont icon-alipay"></i>
                支付宝
              </span>
            </a>
            
          </div>
          
          <div class="all-list s-card hover">
            <span class="title">全部赞赏者名单</span>
            <span class="tip">赞赏金额将全部用于开源项目维护，以及服务器、域名及各类云服务的开销</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
.modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 1000;
}

.modal-mask {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.5);
  z-index: 1001;
}

.modal-container {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  max-width: 430px;
  width: 90%;
  background: var(--main-card-background);
  border-radius: 8px;
  padding: 20px;
  z-index: 1002;
}

.modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
}

.modal-close {
  cursor: pointer;
}

 
.reward {
  position: relative;
  display: flex;
  justify-content: center;
  width: max-content;
  margin: 1rem auto;
  user-select: none;
}

.reward-btn {
  display: flex;
  flex-direction: row;
  align-items: center;
  justify-content: center;
  height: 40px;
  width: 120px;
  border-radius: 8px;
  color: #fff;
  background-color: var(--main-color-red);
  transition: box-shadow 0.5s;
  cursor: pointer;
}

 
</style>



            
            

            
            
  
  
  
  
  <div class="related-post">
    <div class="title">
      <span class="name">
        <i class="iconfont icon-star"></i>
        相关推荐
      </span>
      
      <span class="shuffle" onclick="window.location.href='\/posts\/1417719502\/'">
        随便逛逛
      </span>
      
    </div>

    
    







<div class="post-lists">
    
    <article class="post-item s-card simple" 
             style="animation-delay: 0.4s"
             onclick="window.location.href='\/posts\/interface-mock-implemention-using-mock.js-in-vue.js\/'">
        
        
        
        
        <div class="post-content">
            
            

            
            <span class="post-title">在 Vue.js 中使用 Mock.js 实现接口模拟</span>

            
            
            <span class="post-desc">最近参与前端项目的作者反思了程序员少有机会写自己喜欢的代码，更多时候是为别人写代码。在谈到 Vue.js 结合 Mock.js 实现接口模拟这一话题时，指出它触及前后端分离的核心，并引出协同开发中的问题。讨论了前后端团队接口文档制定和假数据管理的挑战，以及 Mock.js 在解决这些问题上的作用。提到 Swagger 作为接口文档管理工具，推荐使用 Mock.js 来模拟前端调用后端接口，强调了在 Vue 中如何使用 Mock.js 实现接口模拟，以及如何通过 YAPI 或 Apifox 等工具管理 API 接口和 Mock。最后，勉励读者在项目中努力前行，引用古语“山不厌高，海不厌深”表达对追求更完美世界的理想。</span>
            

            
            
        </div>
    </article>
    
    <article class="post-item s-card simple" 
             style="animation-delay: 0.4s"
             onclick="window.location.href='\/posts\/a-simplified-tutorial-on-containerized-deployment-of-front-end-projects-for-vue\/'">
        
        
        
        
        <div class="post-content">
            
            

            
            <span class="post-title">Vue.js 前端项目容器化部署实践极简教程</span>

            
            
            <span class="post-desc">本文介绍了在「微雨燕双飞」的一天中，作者接到朋友询问前端容器化部署问题的电话。作者分享了使用 Docker 容器化部署前端项目的实践教程，以 Vue.js 为例。通过编写 Dockerfile 实现多阶段构建，包括使用 node.js 构建前端项目和部署到 Nginx 静态文件服务器等步骤。另外，还提及了 Nginx 的配置以及使用 OpenSSL 创建证书的过程。最后，作者鼓励读者根据教程进一步完善部署，并展望了未来将撰写关于 ASP.NET Core 测试的文章。</span>
            

            
            
        </div>
    </article>
    
</div>

<style>
.post-lists {
    width: 100%;
}

.post-lists .post-item {
    padding: 0!important;
    display: flex;
    margin-bottom: 1rem;
    animation: fade-up 0.6s backwards;
    cursor: pointer;
    overflow: hidden;
    height: 200px;
}

.post-lists .post-item .post-cover {
    flex: 0 0 35%;
    overflow: hidden;
    transform: translateZ(0);
}

.post-lists .post-item .post-cover img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transform-origin: center center;
    transition: transform 0.5s ease-out, filter 0.5s ease-out;
    backface-visibility: hidden;
}

.post-lists .post-item .post-content {
    flex: 1;
    padding: 1.6rem 2rem;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
}

.post-lists .post-item .post-category {
    display: flex;
    flex-wrap: wrap;
    width: 100%;
    color: var(--main-font-second-color);
    font-size: 14px;
}

.post-lists .post-item .post-category .cat-name {
    display: flex;
    flex-direction: row;
    align-items: center;
}

.post-lists .post-item .post-category .cat-name .iconfont {
    opacity: 0.8;
    margin-right: 6px;
    color: var(--main-font-second-color);
}

.post-lists .post-item .post-category .top {
    margin-left: 12px;
    color: var(--main-color);
}

.post-lists .post-item .post-category .top .iconfont {
    opacity: 0.8;
    color: var(--main-color);
}

.post-lists .post-item .post-title {
    font-size: 20px;
    line-height: 30px;
    font-weight: bold;
    margin: 0.6rem 0;
    transition: color 0.3s;
    display: -webkit-box;
    overflow: hidden;
    word-break: break-all;
    -webkit-box-orient: vertical;
    -webkit-line-clamp: 2;
}

.post-lists .post-item .post-desc {
    margin-top: -0.4rem;
    margin-bottom: 0.8rem;
    opacity: 0.8;
    line-height: 30px;
    display: -webkit-box;
    overflow: hidden;
    word-break: break-all;
    -webkit-box-orient: vertical;
    -webkit-line-clamp: 2;
}

.post-lists .post-item .post-meta {
    display: flex;
    flex-direction: row;
    align-items: center;
    justify-content: space-between;
    color: var(--main-font-second-color);
}

.post-lists .post-item .post-tags {
    display: flex;
    flex-wrap: wrap;
    opacity: 0.8;
    margin-right: 20px;
    overflow: hidden;
    mask: linear-gradient(90deg, #fff 0, #fff 90%, hsla(0,0%,100%,.6) 95%, hsla(0,0%,100%,0) 100%);
}

.post-lists .post-item .post-tags .tags-name {
    display: flex;
    flex-direction: row;
    align-items: center;
    margin-right: 12px;
    white-space: nowrap;
    transition: color 0.3s;
}

.post-lists .post-item .post-time {
    opacity: 0.6;
    font-size: 13px;
    white-space: nowrap;
}

 
.post-lists .post-item:hover .post-cover img {
    filter: brightness(.8);
    transform: scale(1.05);
}

.post-lists .post-item:hover .post-title {
    color: var(--main-color);
}

.post-lists .post-item:active {
    transform: scale(0.98);
}

 
.post-lists .post-item.cover-left {
    flex-direction: row;
}

.post-lists .post-item.cover-right {
    flex-direction: row-reverse;
}

.post-lists .post-item.cover-both:nth-child(odd) {
    flex-direction: row;
}

.post-lists .post-item.cover-both:nth-child(even) {
    flex-direction: row-reverse;
}

 
.post-lists.layout-grid {
    display: grid;
    grid-template-columns: repeat(var(--grid-columns, 2), 1fr);
    gap: var(--grid-gap, 1rem);
}

.post-lists.layout-grid .post-item {
    margin: 0;
    flex-direction: column;
    height: auto;
}

.post-lists.layout-grid .post-item .post-cover {
    flex: none;
    width: 100%;
    height: 225px;
}

 
@media (max-width: 768px) {
    .post-lists .post-item {
        flex-direction: column;
        height: auto;
    }

    .post-lists .post-item .post-cover {
        flex: none;
        width: 100%;
        height: 200px;
    }

    .post-lists .post-item.cover-left,
    .post-lists .post-item.cover-right,
    .post-lists .post-item.cover-both {
        flex-direction: column !important;
    }

    .post-lists.layout-grid {
        grid-template-columns: 1fr;
    }

    .post-lists .post-item .post-tags {
        flex-wrap: nowrap;
    }
}

 
.post-lists .post-item .simple {
    animation: none;
    padding: 0.5rem 1.4rem !important;
    background-color: var(--main-card-second-background);
    height: auto;
    margin-bottom: 0.5rem;
}

.post-lists .post-item .simple .post-content {
    padding: 0.5rem 0;
}

.post-lists .post-item .simple .post-title {
    margin: 0;
    font-size: 16px;
}

.post-lists .post-item .simple .post-desc {
    margin: 0.3rem 0 0 0;
    font-size: 14px;
    opacity: 0.6;
}
</style> 
  </div>
  


<style>
.related-post {
  margin-top: 1rem;
}

.related-post .title {
  display: flex;
  flex-direction: row;
  align-items: center;
  justify-content: space-between;
  width: 100%;
  margin: 3rem 0 1rem 0;
  padding: 0 6px;
}

.related-post .title .name {
  display: flex;
  align-items: center;
  font-size: 24px;
  font-weight: bold;
}

.related-post .title .name .iconfont {
  font-size: 26px;
  font-weight: normal;
  margin-right: 8px;
}

.related-post .title .shuffle {
  opacity: 0.6;
  font-size: 14px;
  transition: color 0.3s, opacity 0.3s;
  cursor: pointer;
}

.related-post .title .shuffle:hover {
  opacity: 1;
  color: var(--main-color);
}
</style>


            
            <div id="comments">
                
<div id="main-comment" class="comment">
    <div v-if="!fill" class="title">
        <span class="name">
            <i class="iconfont icon-chat"></i>
            评论
        </span>
        <span class="tool"> 隐私政策 </span>
    </div>
    <link rel="stylesheet" href="https://unpkg.com/@waline/client@v3/dist/waline.css"/>
<div id="waline" class="waline-container"></div>
<style>
    .waline-container {
        background-color: var(--card-background);
        border-radius: var(--card-border-radius);
        box-shadow: var(--shadow-l1);
        padding: var(--card-padding);
    }
    .waline-container .vcount {
        color: var(--card-text-color-main);
    }
</style>


    <script type="module">
        import { init } from 'https://unpkg.com/@waline/client@v3/dist/waline.js';
        init({
            el: '#waline',
            serverURL: 'https:\/\/waline.yuanpei.me\/',
            lang: 'zh',
            dark: 'auto',
            path: window.location.href,
            requiredMeta: ['nick','mail'],
            emoji: [
                '//unpkg.com/@waline/emojis@1.2.0/weibo'
            ],
            reaction: false,
        });
      </script>


</div>

            </div>
        </article>
        
        <aside class="main-aside">
<div class="hello s-card weidgets">
  <span class="tip" >中午好，吃饱了精神好！</span>
  <div class="content">
    <div class="site-logo">
      <div class="avatar">
    <img src="/images/avatar.jpg" />
</div>
    </div>
    <span class="site-desc"></span>
  </div>
  <div class="info">
    <div class="name">
      <span class="author">飞鸿踏雪</span>
      <span class="desc">纵有疾风起，人生不言弃</span>
    </div>
    <div class="link">
      <a href="https://github.com/qinyuanpei" target="_blank" class="social-link">
        <i class="iconfont icon-github"></i>
      </a>
      <a href="mailto:qinyuapei@163.com" target="_blank" class="social-link">
        <i class="iconfont icon-email"></i>
      </a>
    </div>
  </div>
</div>
<div class="sticky"> 
<div class="aside-countdown s-card weidgets">
  <div class="card-title">
    <i class="fas fa-hourglass-half"></i>
    <span>倒计时</span>
  </div>
  <div class="card-content">
    
  </div>
</div> <div class="tags-cloud s-card weidgets">
  <div class="title">
    <i class="iconfont icon-hashtag"></i>
    <span class="title-name">热门标签</span>
  </div>
  <div class="all-tags">
    
      <a href="/tags/vue/" class="tags">
        <span class="name">Vue</span>
        <sup class="num">6</sup>
      </a>
    
      <a href="/tags/envoy/" class="tags">
        <span class="name">Envoy</span>
        <sup class="num">4</sup>
      </a>
    
      <a href="/tags/.net-core/" class="tags">
        <span class="name">.NET Core</span>
        <sup class="num">3</sup>
      </a>
    
      <a href="/tags/unity3d/" class="tags">
        <span class="name">Unity3D</span>
        <sup class="num">3</sup>
      </a>
    
      <a href="/tags/%E5%89%8D%E7%AB%AF/" class="tags">
        <span class="name">前端</span>
        <sup class="num">3</sup>
      </a>
    
      <a href="/tags/%E5%BE%AE%E6%9C%8D%E5%8A%A1/" class="tags">
        <span class="name">微服务</span>
        <sup class="num">3</sup>
      </a>
    
      <a href="/tags/mock/" class="tags">
        <span class="name">Mock</span>
        <sup class="num">2</sup>
      </a>
    
      <a href="/tags/nginx/" class="tags">
        <span class="name">Nginx</span>
        <sup class="num">2</sup>
      </a>
    
      <a href="/tags/%E6%84%9F%E6%82%9F/" class="tags">
        <span class="name">感悟</span>
        <sup class="num">2</sup>
      </a>
    
      <a href="/tags/%E6%B8%B8%E6%88%8F/" class="tags">
        <span class="name">游戏</span>
        <sup class="num">2</sup>
      </a>
    
      <a href="/tags/%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91/" class="tags">
        <span class="name">游戏开发</span>
        <sup class="num">2</sup>
      </a>
    
      <a href="/tags/%E7%BC%96%E7%A8%8B/" class="tags">
        <span class="name">编程</span>
        <sup class="num">2</sup>
      </a>
    
      <a href="/tags/.net/" class="tags">
        <span class="name">.NET</span>
        <sup class="num">1</sup>
      </a>
    
      <a href="/tags/abp/" class="tags">
        <span class="name">ABP</span>
        <sup class="num">1</sup>
      </a>
    
      <a href="/tags/agent/" class="tags">
        <span class="name">Agent</span>
        <sup class="num">1</sup>
      </a>
    
      <a href="/tags/apache/" class="tags">
        <span class="name">Apache</span>
        <sup class="num">1</sup>
      </a>
    
      <a href="/tags/cdn/" class="tags">
        <span class="name">CDN</span>
        <sup class="num">1</sup>
      </a>
    
      <a href="/tags/dlib/" class="tags">
        <span class="name">Dlib</span>
        <sup class="num">1</sup>
      </a>
    
      <a href="/tags/function-calling/" class="tags">
        <span class="name">Function Calling</span>
        <sup class="num">1</sup>
      </a>
    
      <a href="/tags/github/" class="tags">
        <span class="name">Github</span>
        <sup class="num">1</sup>
      </a>
    
      <a href="/tags/gpts/" class="tags">
        <span class="name">GPTs</span>
        <sup class="num">1</sup>
      </a>
    
      <a href="/tags/grafana/" class="tags">
        <span class="name">Grafana</span>
        <sup class="num">1</sup>
      </a>
    
      <a href="/tags/hangfire/" class="tags">
        <span class="name">Hangfire</span>
        <sup class="num">1</sup>
      </a>
    
      <a href="/tags/hashset/" class="tags">
        <span class="name">HashSet</span>
        <sup class="num">1</sup>
      </a>
    
      <a href="/tags/hexo/" class="tags">
        <span class="name">Hexo</span>
        <sup class="num">1</sup>
      </a>
    
      <a href="/tags/http/" class="tags">
        <span class="name">HTTP</span>
        <sup class="num">1</sup>
      </a>
    
      <a href="/tags/httpclient/" class="tags">
        <span class="name">HttpClient</span>
        <sup class="num">1</sup>
      </a>
    
      <a href="/tags/jsdelivr/" class="tags">
        <span class="name">JsDelivr</span>
        <sup class="num">1</sup>
      </a>
    
      <a href="/tags/k-means/" class="tags">
        <span class="name">K-Means</span>
        <sup class="num">1</sup>
      </a>
    
      <a href="/tags/kindle/" class="tags">
        <span class="name">Kindle</span>
        <sup class="num">1</sup>
      </a>
    
      <a href="/tags/lambda/" class="tags">
        <span class="name">Lambda</span>
        <sup class="num">1</sup>
      </a>
    
      <a href="/tags/langchain/" class="tags">
        <span class="name">LangChain</span>
        <sup class="num">1</sup>
      </a>
    
      <a href="/tags/ldap/" class="tags">
        <span class="name">LDAP</span>
        <sup class="num">1</sup>
      </a>
    
      <a href="/tags/linq/" class="tags">
        <span class="name">Linq</span>
        <sup class="num">1</sup>
      </a>
    
      <a href="/tags/linux/" class="tags">
        <span class="name">Linux</span>
        <sup class="num">1</sup>
      </a>
    
      <a href="/tags/llama/" class="tags">
        <span class="name">LLaMA</span>
        <sup class="num">1</sup>
      </a>
    
      <a href="/tags/love2d/" class="tags">
        <span class="name">Love2D</span>
        <sup class="num">1</sup>
      </a>
    
      <a href="/tags/mcp/" class="tags">
        <span class="name">MCP</span>
        <sup class="num">1</sup>
      </a>
    
      <a href="/tags/mono/" class="tags">
        <span class="name">Mono</span>
        <sup class="num">1</sup>
      </a>
    
      <a href="/tags/opencv/" class="tags">
        <span class="name">OpenCV</span>
        <sup class="num">1</sup>
      </a>
    
      <a href="/tags/prometheus/" class="tags">
        <span class="name">Prometheus</span>
        <sup class="num">1</sup>
      </a>
    
      <a href="/tags/python/" class="tags">
        <span class="name">Python</span>
        <sup class="num">1</sup>
      </a>
    
      <a href="/tags/rag/" class="tags">
        <span class="name">RAG</span>
        <sup class="num">1</sup>
      </a>
    
      <a href="/tags/rpg/" class="tags">
        <span class="name">RPG</span>
        <sup class="num">1</sup>
      </a>
    
      <a href="/tags/scikit-learn/" class="tags">
        <span class="name">Scikit-Learn</span>
        <sup class="num">1</sup>
      </a>
    
      <a href="/tags/semantic-kernel/" class="tags">
        <span class="name">Semantic Kernel</span>
        <sup class="num">1</sup>
      </a>
    
      <a href="/tags/signalr/" class="tags">
        <span class="name">SignalR</span>
        <sup class="num">1</sup>
      </a>
    
      <a href="/tags/svn/" class="tags">
        <span class="name">SVN</span>
        <sup class="num">1</sup>
      </a>
    
      <a href="/tags/ugui/" class="tags">
        <span class="name">UGUI</span>
        <sup class="num">1</sup>
      </a>
    
      <a href="/tags/websocket/" class="tags">
        <span class="name">WebSocket</span>
        <sup class="num">1</sup>
      </a>
    
      <a href="/tags/%E4%BA%BA%E8%84%B8%E5%88%86%E7%B1%BB/" class="tags">
        <span class="name">人脸分类</span>
        <sup class="num">1</sup>
      </a>
    
      <a href="/tags/%E4%BB%99%E5%89%91%E5%A5%87%E4%BE%A0%E4%BC%A0/" class="tags">
        <span class="name">仙剑奇侠传</span>
        <sup class="num">1</sup>
      </a>
    
      <a href="/tags/%E4%BD%8E%E4%BB%A3%E7%A0%81/" class="tags">
        <span class="name">低代码</span>
        <sup class="num">1</sup>
      </a>
    
      <a href="/tags/%E5%85%AB%E5%8D%A6/" class="tags">
        <span class="name">八卦</span>
        <sup class="num">1</sup>
      </a>
    
      <a href="/tags/%E5%88%86%E9%A1%B5/" class="tags">
        <span class="name">分页</span>
        <sup class="num">1</sup>
      </a>
    
      <a href="/tags/%E5%8A%A8%E6%BC%AB/" class="tags">
        <span class="name">动漫</span>
        <sup class="num">1</sup>
      </a>
    
      <a href="/tags/%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86/" class="tags">
        <span class="name">反向代理</span>
        <sup class="num">1</sup>
      </a>
    
      <a href="/tags/%E5%93%AA%E5%90%92/" class="tags">
        <span class="name">哪吒</span>
        <sup class="num">1</sup>
      </a>
    
      <a href="/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/" class="tags">
        <span class="name">图像处理</span>
        <sup class="num">1</sup>
      </a>
    
      <a href="/tags/%E5%A4%8F%E7%9B%AE%E6%BC%B1%E7%9F%B3/" class="tags">
        <span class="name">夏目漱石</span>
        <sup class="num">1</sup>
      </a>
    
      <a href="/tags/%E5%AE%B9%E5%99%A8/" class="tags">
        <span class="name">容器</span>
        <sup class="num">1</sup>
      </a>
    
      <a href="/tags/%E5%B0%81%E7%A5%9E/" class="tags">
        <span class="name">封神</span>
        <sup class="num">1</sup>
      </a>
    
      <a href="/tags/%E5%BD%B1%E8%AF%84/" class="tags">
        <span class="name">影评</span>
        <sup class="num">1</sup>
      </a>
    
      <a href="/tags/%E6%80%9D%E8%80%83/" class="tags">
        <span class="name">思考</span>
        <sup class="num">1</sup>
      </a>
    
      <a href="/tags/%E6%88%91%E6%98%AF%E7%8C%AB/" class="tags">
        <span class="name">我是猫</span>
        <sup class="num">1</sup>
      </a>
    
      <a href="/tags/%E6%89%A9%E5%B1%95/" class="tags">
        <span class="name">扩展</span>
        <sup class="num">1</sup>
      </a>
    
      <a href="/tags/%E6%95%B0%E6%8D%AE/" class="tags">
        <span class="name">数据</span>
        <sup class="num">1</sup>
      </a>
    
      <a href="/tags/%E6%97%A5%E5%89%A7/" class="tags">
        <span class="name">日剧</span>
        <sup class="num">1</sup>
      </a>
    
      <a href="/tags/%E6%97%A5%E6%9C%AC%E6%96%87%E5%AD%A6/" class="tags">
        <span class="name">日本文学</span>
        <sup class="num">1</sup>
      </a>
    
      <a href="/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/" class="tags">
        <span class="name">机器学习</span>
        <sup class="num">1</sup>
      </a>
    
      <a href="/tags/%E6%BA%90%E7%A0%81/" class="tags">
        <span class="name">源码</span>
        <sup class="num">1</sup>
      </a>
    
      <a href="/tags/%E7%86%B5%E5%A2%9E%E5%AE%9A%E5%BE%8B/" class="tags">
        <span class="name">熵增定律</span>
        <sup class="num">1</sup>
      </a>
    
      <a href="/tags/%E7%88%B1%E6%83%85/" class="tags">
        <span class="name">爱情</span>
        <sup class="num">1</sup>
      </a>
    
      <a href="/tags/%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/" class="tags">
        <span class="name">版本控制</span>
        <sup class="num">1</sup>
      </a>
    
      <a href="/tags/%E7%8A%B6%E6%80%81/" class="tags">
        <span class="name">状态</span>
        <sup class="num">1</sup>
      </a>
    
      <a href="/tags/%E7%94%9F%E6%B4%BB/" class="tags">
        <span class="name">生活</span>
        <sup class="num">1</sup>
      </a>
    
      <a href="/tags/%E7%94%B5%E5%BD%B1/" class="tags">
        <span class="name">电影</span>
        <sup class="num">1</sup>
      </a>
    
      <a href="/tags/%E7%9B%91%E6%8E%A7/" class="tags">
        <span class="name">监控</span>
        <sup class="num">1</sup>
      </a>
    
      <a href="/tags/%E7%A0%94%E5%8F%91/" class="tags">
        <span class="name">研发</span>
        <sup class="num">1</sup>
      </a>
    
      <a href="/tags/%E7%A8%8B%E5%BA%8F%E5%91%98/" class="tags">
        <span class="name">程序员</span>
        <sup class="num">1</sup>
      </a>
    
      <a href="/tags/%E7%A9%BF%E6%90%AD/" class="tags">
        <span class="name">穿搭</span>
        <sup class="num">1</sup>
      </a>
    
      <a href="/tags/%E7%AE%A1%E9%81%93/" class="tags">
        <span class="name">管道</span>
        <sup class="num">1</sup>
      </a>
    
      <a href="/tags/%E7%BD%91%E5%85%B3/" class="tags">
        <span class="name">网关</span>
        <sup class="num">1</sup>
      </a>
    
      <a href="/tags/%E8%81%9A%E7%B1%BB/" class="tags">
        <span class="name">聚类</span>
        <sup class="num">1</sup>
      </a>
    
      <a href="/tags/%E8%A1%8C%E4%B8%9A/" class="tags">
        <span class="name">行业</span>
        <sup class="num">1</sup>
      </a>
    
      <a href="/tags/%E8%A1%A8%E5%8D%95/" class="tags">
        <span class="name">表单</span>
        <sup class="num">1</sup>
      </a>
    
      <a href="/tags/%E8%A1%A8%E8%BE%BE%E5%BC%8F%E6%A0%91/" class="tags">
        <span class="name">表达式树</span>
        <sup class="num">1</sup>
      </a>
    
      <a href="/tags/%E8%AE%A4%E8%AF%81/" class="tags">
        <span class="name">认证</span>
        <sup class="num">1</sup>
      </a>
    
      <a href="/tags/%E8%AF%BB%E4%B9%A6/" class="tags">
        <span class="name">读书</span>
        <sup class="num">1</sup>
      </a>
    
      <a href="/tags/%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1/" class="tags">
        <span class="name">负载均衡</span>
        <sup class="num">1</sup>
      </a>
    
      <a href="/tags/%E8%B4%AA%E5%90%83%E8%9B%87/" class="tags">
        <span class="name">贪吃蛇</span>
        <sup class="num">1</sup>
      </a>
    
      <a href="/tags/%E8%B7%A8%E5%B9%B3%E5%8F%B0/" class="tags">
        <span class="name">跨平台</span>
        <sup class="num">1</sup>
      </a>
    
      <a href="/tags/%E8%B7%AF%E7%94%B1/" class="tags">
        <span class="name">路由</span>
        <sup class="num">1</sup>
      </a>
    
      <a href="/tags/%E8%BF%81%E7%A7%BB/" class="tags">
        <span class="name">迁移</span>
        <sup class="num">1</sup>
      </a>
    
      <a href="/tags/%E9%9A%8F%E7%AC%94/" class="tags">
        <span class="name">随笔</span>
        <sup class="num">1</sup>
      </a>
    
      <a href="/tags/%E9%9D%A2%E8%AF%95/" class="tags">
        <span class="name">面试</span>
        <sup class="num">1</sup>
      </a>
    
      <a href="/tags/%E9%AA%8C%E8%AF%81/" class="tags">
        <span class="name">验证</span>
        <sup class="num">1</sup>
      </a>
    
  </div>
  <a href="/tags" class="more-tags">查看全部</a>
</div><div class="site-data s-card weidgets">
    <div class="title">
      <i class="iconfont icon-chart"></i>
      <span class="title-name">站点数据</span>
    </div>
    <div class="all-data">
      <div class="data-item">
        <span class="name">
          <i class="iconfont icon-article"></i>
          文章总数
        </span>
        <span class="num">277 篇</span>
      </div>
      <div class="data-item">
        <span class="name">
          <i class="iconfont icon-date"></i>
          建站天数
        </span>
        <span class="num">200 天</span>
      </div>
      <div class="data-item">
        <span class="name">
          <i class="iconfont icon-visibility"></i>
          总访问量
        </span>
        <span class="num" id="busuanzi_value_site_pv">0</span>
      </div>
      <div class="data-item">
        <span class="name">
          <i class="iconfont icon-account"></i>
          总访客数
        </span>
        <span class="num" id="busuanzi_value_site_uv">0</span>
      </div>
    </div>
  </div></div>
  </aside>
  <style>
  .main-aside {
    padding-left: 1rem;
    display: flex;
    flex-direction: column;
    animation: fade-up 0.6s 0.3s backwards;
    .weidgets {
      padding: 18px;
      margin-bottom: 1rem;
      :deep(.title) {
        margin-bottom: 12px;
        font-weight: bold;
        display: flex;
        align-items: center;
        opacity: 0.75;
        .iconfont {
          opacity: 0.6;
          margin-right: 6px;
        }
        .title-name {
          opacity: 0.8;
        }
      }
    }
    .sticky {
      position: sticky;
      top: calc(60px + 1rem);
      .weidgets {
        animation: fade-up 0.6s 0.4s backwards;
        &:last-child {
          margin-bottom: 0;
        }
      }
    }
  }
  </style>
  
    </div>
</div>

<style>
 
:root {
  --code-bg: #fff;
  --code-border: #e1e4e8;
  --code-line-number-color: #8b949e;
  --code-line-number-border: #e1e4e8;
  --code-header-bg: #f6f8fa;
  --code-header-color: #424242;
  --code-button-hover: #f3f4f6;
}

 
@media (prefers-color-scheme: dark) {
  :root {
    --code-bg: #0d1117;
    --code-border: #30363d;
    --code-line-number-color: #8b949e;
    --code-line-number-border: #30363d;
    --code-header-bg: #161b22;
    --code-header-color: #c9d1d9;
    --code-button-hover: #21262d;
  }
}

.highlight {
  position: relative;
  background: var(--code-bg);
  border: 1px solid var(--code-border);
  border-radius: 6px;
}

 
.highlight-header {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 2.2rem;
  display: flex;
  justify-content: space-between;
  align-items: center;
  background: var(--code-header-bg);
  border-bottom: 1px solid var(--code-border);
  border-radius: 6px 6px 0 0;
  padding: 0 0.5rem;
}

 
.highlight-info {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding-left: 0.5rem;
  color: var(--code-header-color);
  font-size: 0.75rem;
}

 
.highlight-lang {
  padding: 0.2rem 0.5rem;
  border-radius: 3px;
  background: var(--code-bg);
  color: var(--code-header-color);
}

 
.copy-button {
  padding: 0.2rem 0.8rem;
  font-size: 0.75rem;
  color: var(--code-header-color);
  background: var(--code-bg);
  border: 1px solid var(--code-border);
  border-radius: 3px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.copy-button:hover {
  background: var(--code-button-hover);
}

.copy-button.copied {
  color: #1a7f37;
  border-color: #1a7f37;
}

@media (prefers-color-scheme: dark) {
  .copy-button.copied {
    color: #7ee787;
    border-color: #7ee787;
  }
}

 
.highlight-content {
  display: flex;
  width: 100%;
  margin-top: 2.2rem;  
}

 
.line-numbers {
  padding: 1rem 0;
  min-width: 3.5em;
  text-align: right;
  color: var(--code-line-number-color);
  border-right: 1px solid var(--code-line-number-border);
  user-select: none;
  background: var(--code-header-bg);
}

.line-numbers span {
  display: block;
  padding-right: 1rem;
  line-height: 1.5;
  font-size: 0.875rem;
  font-family: ui-monospace, SFMono-Regular, SF Mono, Menlo, Consolas, Liberation Mono, monospace;
}

 
.highlight pre {
  flex: 1;
  margin: 0;
  padding: 1rem 0;
  overflow-x: auto;
  background-color: var(--code-bg);;
}

.highlight pre code {
  padding: 0 1rem;
  display: block;
  font-size: 0.875rem;
  line-height: 1.5;
  font-family: ui-monospace, SFMono-Regular, SF Mono, Menlo, Consolas, Liberation Mono, monospace;
}

 
.highlight pre::-webkit-scrollbar {
  height: 8px;
}

.highlight pre::-webkit-scrollbar-thumb {
  background: var(--code-border);
  border-radius: 4px;
}

.highlight pre::-webkit-scrollbar-track {
  background: var(--code-header-bg);
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
  
  hljs.highlightAll();

  document.querySelectorAll('pre > code').forEach((codeBlock) => {
    const pre = codeBlock.parentElement;
    const container = document.createElement('div');
    container.className = 'highlight';
    pre.parentNode.insertBefore(container, pre);

    
    const language = codeBlock.getAttribute('data-lang') || codeBlock.className.match(/language-(\w+)/)?.[1] || 'plaintext';

    
    const header = document.createElement('div');
    header.className = 'highlight-header';
    
    
    const info = document.createElement('div');
    info.className = 'highlight-info';
    
    
    const lang = document.createElement('span');
    lang.className = 'highlight-lang';
    lang.textContent = language;
    info.appendChild(lang);
    
    
    const lines = codeBlock.innerHTML.trim().split('\n');
    const lineCount = document.createElement('span');
    lineCount.textContent = `${lines.length} 行`;
    lineCount.style.display = 'none';
    info.appendChild(lineCount);
    
    header.appendChild(info);

    
    const copyButton = document.createElement('button');
    copyButton.className = 'copy-button';
    copyButton.textContent = '复制';
    header.appendChild(copyButton);

    
    const content = document.createElement('div');
    content.className = 'highlight-content';

    
    const lineNumbers = document.createElement('div');
    lineNumbers.className = 'line-numbers';
    lineNumbers.innerHTML = lines.map((_, i) => `<span>${i + 1}</span>`).join('');

    content.appendChild(lineNumbers);
    content.appendChild(pre);

    container.appendChild(header);
    container.appendChild(content);

    
    copyButton.addEventListener('click', async () => {
      try {
        await navigator.clipboard.writeText(codeBlock.textContent);
        copyButton.textContent = '已复制';
        copyButton.classList.add('copied');
        setTimeout(() => {
          copyButton.textContent = '复制';
          copyButton.classList.remove('copied');
        }, 2000);
      } catch (err) {
        console.error('复制失败:', err);
        copyButton.textContent = '复制失败';
      }
    });
  });
});
</script>

        </main>

        <div class="footer-link">
    
    <div class="footer-bar">
      <span class="site-title">元视角</span>
      <span class="site-desc">纵有疾风起，人生不言弃</span>
      <a href="/" class="to-home">了解更多</a>
    </div>
    
  
    <div class="footer-social">
      
      <a href="https://github.com/yourusername" target="_blank" class="social-link">
        <i class="iconfont icon-github"></i>
      </a>
      
      <a href="https://twitter.com/yourusername" target="_blank" class="social-link">
        <i class="iconfont icon-weibo"></i>
      </a>
      
  
      <div class="logo" title="返回顶部" onclick="window.scrollTo({top: 0, behavior: 'smooth'})">
        <img src="/images/icons8-stellar-128.png" alt="author" class="author" />
      </div>
  
      
      <a href="https://www.douban.com/people/60029335/" target="_blank" class="social-link">
        <i class="iconfont icon-douban"></i>
      </a>
      
      <a href="https://www.zhihu.com/people/qinyuanpei" target="_blank" class="social-link">
        <i class="iconfont icon-zhihu"></i>
      </a>
      
    </div>
  
    <div class="footer-sitemap">
      
      <div class="sitemap-item">
        <span class="title">博客</span>
        <div class="links">
          
          <a href="/"  class="link-text">
            近期文章
          </a>
          
          <a href="/categories"  class="link-text">
            全部分类
          </a>
          
          <a href="/tags"  class="link-text">
            全部标签
          </a>
          
          <a href="/archives"  class="link-text">
            文章归档
          </a>
          
        </div>
      </div>
      
      <div class="sitemap-item">
        <span class="title">项目</span>
        <div class="links">
          
          <a href="https://example1.com" target="_blank" class="link-text">
            项目1
          </a>
          
          <a href="https://example2.com" target="_blank" class="link-text">
            项目2
          </a>
          
          <a href="https://example2.com" target="_blank" class="link-text">
            项目3
          </a>
          
          <a href="https://example2.com" target="_blank" class="link-text">
            项目4
          </a>
          
        </div>
      </div>
      
      <div class="sitemap-item">
        <span class="title">专栏</span>
        <div class="links">
          
          <a href="https://blog.csdn.net/qinyuanpei/category_10852603.html" target="_blank" class="link-text">
            .NET 源代码探案系列
          </a>
          
          <a href="https://blog.csdn.net/qinyuanpei/category_7444699.html" target="_blank" class="link-text">
            Python 数据挖掘系列
          </a>
          
          <a href="https://blog.csdn.net/qinyuanpei/category_11484903.html" target="_blank" class="link-text">
            分布式丛林探险系列
          </a>
          
          <a href="https://blog.csdn.net/qinyuanpei/category_1708629.html" target="_blank" class="link-text">
            Unity3D 游戏开发系列
          </a>
          
        </div>
      </div>
      
      <div class="sitemap-item">
        <span class="title">页面</span>
        <div class="links">
          
          <a href="/guest"  class="link-text">
            畅所欲言
          </a>
          
          <a href="/books"  class="link-text">
            阅读记录
          </a>
          
          <a href="/movies"  class="link-text">
            观影记录
          </a>
          
          <a href="/musics"  class="link-text">
            听歌记录
          </a>
          
        </div>
      </div>
      
      <div class="sitemap-item">
        <span class="title">友情链接</span>
        <div class="links">
          
          <a href="https://blog.zhheo.com/"  class="link-text">
            张洪
          </a>
          
          <a href="https://blog.zhheo.com/"  class="link-text">
            张洪
          </a>
          
          <a href="https://blog.zhheo.com/"  class="link-text">
            张洪
          </a>
          
          <a href="https://blog.zhheo.com/"  class="link-text">
            更多
          </a>
          
        </div>
      </div>
      
    </div>
  </div><footer id="main-footer" class="main-footer">
    <div class="footer-content">
        <div class="footer-copyright">
            <span class="time" data-v-6001e979="">@ 2014 - 2025 By </span>
            <a href="https://www.imsyy.top" class="author link" target="_blank">
                飞鸿踏雪
            </a>
            
            
        </div>
        <div class="meta">
            <a class="power link" href="https://vitepress.dev/" target="_blank">
                <span class="by">Powered by</span>
                <span class="name">Hugo</span>
            </a>
            <a class="theme link" href="/pages/theme">
                <span class="name">主题</span>
            </a>
            <a class="rss link" href="https://blog.imsyy.top/rss.xml" target="_blank">
                <i class="iconfont icon-rss"></i>
                <span class="name" data-v-6001e979="">订阅</span>
            </a>
            <a class="cc link" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh-hans" target="_blank">
                <i class="iconfont icon-line"></i>
                <i class="iconfont icon-by-line"></i>
                <i class="iconfont icon-nc-line"></i><i
                    class="iconfont icon-nd-line"></i>
            </a>
        </div>
    </div>
</footer>
<script type="module" src="/js/main.js"></script><div class="modal search-modal" id="searchModal">
  <div class="modal-container">
    <div class="modal-header">
      <div class="modal-title">
        <i class="iconfont icon-search"></i>
        <span>全局搜索</span>
      </div>
      <div class="modal-close">
        <i class="iconfont icon-close"></i>
      </div>
    </div>

    <div class="search-container">
      <div class="search-box">
        <input 
          type="text" 
          id="searchInput"
          placeholder="想要搜点什么" 
          autocomplete="off"
          autofocus
        >
      </div>

      <div class="search-results" id="searchResults">
        <div class="no-result" id="noResult" style="display: none;">
          <i class="iconfont icon-search-empty"></i>
          <span class="text">搜索结果为空</span>
        </div>
        <div class="search-list" id="searchList"></div>
      </div>

      <div class="search-stats">
        <span class="text" id="searchStats"></span>
      </div>
    </div>
  </div>
</div>

<style>
.search-modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.5);
  z-index: 999;
  display: none;
}

.modal-container {
  position: relative;
  width: 90%;
  max-width: 768px;
  margin: 80px auto;
  background-color: var(--main-card-background);
  border-radius: 12px;
  padding: 1.5rem;
}

.modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 1rem;
}

.modal-title {
  display: flex;
  align-items: center;
  font-size: 1.2rem;
  font-weight: bold;
}

.modal-title .iconfont {
  margin-right: 0.5rem;
}

.modal-close {
  cursor: pointer;
  padding: 0.5rem;
}

.search-box input {
  width: 100%;
  outline: none;
  border-radius: 8px;
  font-size: 16px;
  padding: 0.6rem 1rem;
  color: var(--main-font-color);
  font-family: var(--main-font-family);
  border: 1px solid var(--main-card-border);
  background-color: var(--main-card-second-background);
  transition: border-color 0.3s, box-shadow 0.3s;
}

.search-box input:focus {
  border-color: var(--main-color);
  box-shadow: 0 8px 16px -4px var(--main-color-bg);
}

.search-results {
  margin-top: 20px;
  min-height: 300px;
}

.no-result {
  height: 300px;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}

.no-result .iconfont {
  font-size: 40px;
  margin-bottom: 12px;
}

.no-result .text {
  font-size: 18px;
  opacity: 0.6;
}

.search-list .search-item {
  margin-bottom: 12px;
  padding: 1rem;
  border-radius: 8px;
  background-color: var(--main-card-second-background);
  cursor: pointer;
  transition: transform 0.3s;
}

.search-list .search-item:hover {
  transform: translateY(-2px);
}

.search-item .title {
  font-size: 16px;
  margin-bottom: 6px;
}

.search-item .content {
  color: var(--main-font-second-color);
  font-size: 14px;
  margin-top: 8px;
}

.search-stats {
  margin-top: 1rem;
  font-size: 14px;
  color: var(--main-font-second-color);
}

.highlight {
  color: var(--main-color);
  background: transparent;
}
</style> 
    </body>
</html> 