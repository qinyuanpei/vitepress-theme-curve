function a(){({types:["light","dark","auto"],currentType:"auto",icons:{light:"icon-sun",dark:"icon-moon",auto:"icon-auto"},toggle(){let t=(this.types.indexOf(this.currentType)+1)%this.types.length;this.currentType=this.types[t],this.apply(),localStorage.setItem("theme",this.currentType),this.updateIcon()},apply(){let e=document.documentElement;if(this.types.forEach(t=>{e.classList.remove(t)}),this.currentType==="auto"){let n=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";e.classList.add(n)}else e.classList.add(this.currentType);console.log("\u5F53\u524D\u6A21\u5F0F\uFF1A",this.currentType)},updateIcon(){let e=document.getElementById("themeIcon");e&&(e.className=`iconfont ${this.icons[this.currentType]}`)},init(){let e=localStorage.getItem("theme");e&&this.types.includes(e)&&(this.currentType=e),this.apply(),this.updateIcon(),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",()=>{this.currentType==="auto"&&this.apply()});let t=document.getElementById("themeToggle");t&&t.addEventListener("click",()=>this.toggle())}}).init()}function d(){({toggle(){let e=document.getElementById("mobileMenu");e&&(e.style.display=e.style.display==="none"?"block":"none")},init(){let e=document.querySelector(".nav-btn.mobile");e&&e.addEventListener("click",()=>this.toggle());let t=document.querySelector(".mobile-menu .close-control"),n=document.querySelector(".mobile-menu .menu-mask");t&&t.addEventListener("click",()=>this.toggle()),n&&n.addEventListener("click",()=>this.toggle())}}).init()}function u(){if(typeof Fancybox>"u"){console.error("Fancybox \u521D\u59CB\u5316\u5F02\u5E38");return}Fancybox.bind("[data-fancybox]",{hideScrollbar:!0,Carousel:{transition:"slide"},Hash:!1,Toolbar:{display:{left:["infobar"],middle:["zoomIn","zoomOut","toggle1to1","rotateCCW","rotateCW","flipX","flipY"],right:["slideshow","thumbs","close"]}},l10n:{PANUP:"\u4E0A\u79FB",PANDOWN:"\u4E0B\u79FB",PANLEFT:"\u5DE6\u79FB",PANRIGHT:"\u53F3\u79FB",ZOOMIN:"\u653E\u5927",ZOOMOUT:"\u7F29\u5C0F",TOGGLEZOOM:"\u5207\u6362\u7F29\u653E\u7EA7\u522B",TOGGLE1TO1:"\u5207\u6362\u7F29\u653E\u7EA7\u522B",ITERATEZOOM:"\u5207\u6362\u7F29\u653E\u7EA7\u522B",ROTATECCW:"\u9006\u65F6\u9488\u65CB\u8F6C",ROTATECW:"\u987A\u65F6\u9488\u65CB\u8F6C",FLIPX:"\u6C34\u5E73\u7FFB\u8F6C",FLIPY:"\u5782\u76F4\u7FFB\u8F6C",FITX:"\u6C34\u5E73\u9002\u5E94",FITY:"\u5782\u76F4\u9002\u5E94",RESET:"\u91CD\u7F6E",TOGGLEFS:"\u5207\u6362\u5168\u5C4F",CLOSE:"\u5173\u95ED",NEXT:"\u4E0B\u4E00\u4E2A",PREV:"\u4E0A\u4E00\u4E2A",MODAL:"\u4F7F\u7528 ESC \u952E\u5173\u95ED",ERROR:"\u53D1\u751F\u4E86\u9519\u8BEF\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5",IMAGE_ERROR:"\u627E\u4E0D\u5230\u56FE\u50CF",ELEMENT_NOT_FOUND:"\u627E\u4E0D\u5230 HTML \u5143\u7D20",AJAX_NOT_FOUND:"\u8F7D\u5165 AJAX \u65F6\u51FA\u9519: \u672A\u627E\u5230",AJAX_FORBIDDEN:"\u8F7D\u5165 AJAX \u65F6\u51FA\u9519: \u88AB\u963B\u6B62",IFRAME_ERROR:"\u52A0\u8F7D\u9875\u9762\u51FA\u9519",TOGGLE_ZOOM:"\u5207\u6362\u7F29\u653E\u7EA7\u522B",TOGGLE_THUMBS:"\u5207\u6362\u7F29\u7565\u56FE",TOGGLE_SLIDESHOW:"\u5207\u6362\u5E7B\u706F\u7247",TOGGLE_FULLSCREEN:"\u5207\u6362\u5168\u5C4F",DOWNLOAD:"\u4E0B\u8F7D"}})}function h(){let o={searchData:[],toggleSearch(){let e=document.getElementById("searchModal");e.style.display=e.style.display==="none"?"block":"none",e.style.display==="block"&&document.getElementById("searchInput").focus()},search(e){let t=performance.now(),n=this.searchData.filter(c=>c.title.toLowerCase().includes(e.toLowerCase())||c.content.toLowerCase().includes(e.toLowerCase())),i=document.getElementById("searchList"),s=document.getElementById("noResult"),r=document.getElementById("searchStats");n.length===0?(i.style.display="none",s.style.display="flex"):(i.style.display="block",s.style.display="none",i.innerHTML=n.map(c=>`
                <div class="search-item" onclick="window.location.href='${c.url}'">
                    <div class="title">${this.highlightKeyword(c.title,e)}</div>
                    <div class="content">${this.highlightKeyword(this.truncateContent(c.content),e)}</div>
                </div>
            `).join(""));let y=performance.now();r.textContent=`\u672C\u6B21\u7528\u65F6 ${Math.round(y-t)} \u6BEB\u79D2`},highlightKeyword(e,t){if(!t)return e;let n=new RegExp(t,"gi");return e.replace(n,i=>`<span class="highlight">${i}</span>`)},truncateContent(e,t=200){return e.length>t?e.substring(0,t)+"...":e},init(){document.getElementById("searchInput").addEventListener("input",n=>{this.search(n.target.value)}),document.addEventListener("keydown",n=>{n.key==="Escape"&&this.toggleSearch()});let e=document.querySelector('.nav-btn[title="\u5168\u7AD9\u641C\u7D22"]');e&&e.addEventListener("click",()=>this.toggleSearch());let t=document.querySelector(".modal-close");t&&t.addEventListener("click",()=>this.toggleSearch())}};window.Search=o}function g(o,e){let t=null,n=0;return function(){let i=Date.now(),s=e-(i-n);s<=0||s>e?(t&&(clearTimeout(t),t=null),n=i,o.apply(this,arguments)):t||(t=setTimeout(()=>{n=Date.now(),t=null,o.apply(this,arguments)},s))}}function l(){let o=document.querySelector(".main-nav"),e=document.querySelector(".to-top"),t=document.querySelector(".to-top .num"),n=window.scrollY||window.pageYOffset,i=document.documentElement.scrollHeight-window.innerHeight,s=(n/i*100).toFixed(0);n===0?o.classList.add("top"):o.classList.remove("top");let r=n>(l.lastScrollY||0)?"down":"up";l.lastScrollY=n,o.classList.remove("up","down"),o.classList.add(r),n===0?e.classList.add("hidden"):e.classList.remove("hidden"),t&&(t.textContent=s),s>90?(t.textContent="\u8FD4\u56DE\u9876\u90E8",e.classList.add("long")):e.classList.remove("long")}function m(){window.scrollTo({top:0,behavior:"smooth"})}function p(){l(),window.addEventListener("scroll",g(l,300));let o=document.querySelector(".to-top");o&&o.addEventListener("click",m);let e=document.querySelector(".site-title");e&&e.addEventListener("click",m)}function f(o){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",o):o()}function E(){a(),d(),u(),h(),p()}f(E);
