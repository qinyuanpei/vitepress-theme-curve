const Search={searchData:[],toggleSearch(){const e=document.getElementById("searchModal");e.style.display=e.style.display==="none"?"block":"none",e.style.display==="block"&&document.getElementById("searchInput").focus()},search(e){const o=performance.now(),n=this.searchData.filter(t=>t.title.toLowerCase().includes(e.toLowerCase())||t.content.toLowerCase().includes(e.toLowerCase())),t=document.getElementById("searchList"),s=document.getElementById("noResult"),i=document.getElementById("searchStats");n.length===0?(t.style.display="none",s.style.display="flex"):(t.style.display="block",s.style.display="none",t.innerHTML=n.map(t=>`
                <div class="search-item" onclick="window.location.href='${t.url}'">
                    <div class="title">${this.highlightKeyword(t.title,e)}</div>
                    <div class="content">${this.highlightKeyword(this.truncateContent(t.content),e)}</div>
                </div>
            `).join(""));const a=performance.now();i.textContent=`本次用时 ${Math.round(a-o)} 毫秒`},highlightKeyword(e,t){if(!t)return e;const n=new RegExp(t,"gi");return e.replace(n,e=>`<span class="highlight">${e}</span>`)},truncateContent(e,t=200){return e.length>t?e.substring(0,t)+"...":e},init(){document.getElementById("searchInput").addEventListener("input",e=>{this.search(e.target.value)}),document.addEventListener("keydown",e=>{e.key==="Escape"&&this.toggleSearch()});const e=document.querySelector('.nav-btn[title="全站搜索"]');e&&e.addEventListener("click",()=>this.toggleSearch());const t=document.querySelector(".modal-close");t&&t.addEventListener("click",()=>this.toggleSearch())}};window.Search=Search